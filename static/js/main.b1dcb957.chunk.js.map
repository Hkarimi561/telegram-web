{"version":3,"sources":["Utils/InputTypingManager.js","Stores/ChatStore.js","Components/Theme.js","Language.js","Theme.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js","Controllers/TdLibController.js","Constants.js","Utils/Common.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Additional/AppInactiveControl.js","Components/InactivePage.js","Components/StubPage.js","TelegramApp.js","index.js","Stores/OptionStore.js","registerServiceWorker.js","Stores/UserStore.js","Utils/HOC.js","Stores/LocalizationStore.js","Components/Footer.js"],"names":["InputTypingManager","chatId","timeoutCallback","Object","classCallCheck","this","actions","Map","timerId","handleTimer","bind","addAction","clearAction","setActionsTimeout","now","Date","expiredActions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref3","value","_ref2","slicedToArray","key","expire","push","err","return","_arr","_i","length","delete","update","@type","chat_id","action","userId","setSeconds","getSeconds","TYPING_INPUT_INTERVAL_S","set","clearTimeout","timeout","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref6","_ref5","actionTimeout","setTimeout","store","ChatStore","_this","possibleConstructorReturn","getPrototypeOf","call","loadClientData","cookies","Cookies","clientData","data","get","keys","forEach","Number","_unused","saveClientData","obj","Array","from","entries","reduce","_ref","String","onUpdate","state","updating","skippedUpdates","TdLibController","parameters","fastUpdating","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","order","draft_message","chat","assign","is_marked_as_unread","is_pinned","is_sponsored","last_message","notification_settings","photo","type","user","UserStore","user_id","profile_photo","pinned_message_id","last_read_inbox_message_id","unread_count","last_read_outbox_message_id","reply_markup_message_id","title","unread_mention_count","typingManager","getTypingManager","setTypingManager","onClientUpdate","send","client_data","JSON","stringify","setClientData","emit","addTdLibListener","addListener","removeTdLibListener","removeListener","items","typingManagers","onlineMemberCount","setMaxListeners","Infinity","source1","source2","id","EventEmitter","window","__webpack_require__","d","__webpack_exports__","borderStyle","accentStyles","theme","borderColor","palette","divider","accentColorLight","color","primary","light","accentColorDark","dark","accentColorMain","main","accentBackgroundLight","background","accentBackgroundDark","withLanguage","WrappedComponent","LanguageWrapper","_React$Component","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","i18n","LocalizationStore","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_i18next__WEBPACK_IMPORTED_MODULE_6__","props","React","Component","displayName","concat","getDisplayName","withTheme","ThemeWrapper","onClientUpdateThemeChanging","createMuiTheme","secondary","typography","useNextVariants","setState","ApplicationStore","blue","on","_material_ui_styles_StylesProvider__WEBPACK_IMPORTED_MODULE_9___default","injectFirst","_material_ui_core_styles_MuiThemeProvider__WEBPACK_IMPORTED_MODULE_8___default","ActionScheduler","actionCallback","cancelCallback","add","cancel","has","setMilliseconds","getMilliseconds","invoke","asyncToGenerator","regenerator_default","mark","_callee","item","wrap","_context","prev","abrupt","stop","_x","remove","_ref4","expired","_ref7","addScheduledAction","actionScheduler","invokeScheduledAction","removeScheduledAction","handleScheduledAction","console","log","handleCancelScheduledAction","authorizationState","authorization_state","loggingOut","sendTdParameters","setPhoneNumberRequest","init","document","connectionState","setNotificationSettings","scope","content","text","confirm","logOut","alert","extendedUpdate","nextChatId","nextMessageId","messageId","previousChatId","previousMessageId","phone","defaultPhone","setPhoneNumber","clientUpdate","dialogChatId","name","focused","inProgress","setChatId","phone_number","then","result","catch","error","onUpdateStatistics","statistics","count","addStatistics","getDragging","dragging","setDragging","scopeNotificationSettings","isChatDetailsVisible","mediaViewerContent","profileMediaViewerContent","visibility","notificationSettings","application","controller","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","location","setParameters","_this$parameters","verbosity","jsVerbosity","useTestDC","readOnly","useDatabase","mode","dbname","callback","req","indexedDB","open","existed","onsuccess","close","deleteDatabase","onupgradeneeded","databaseExists","exists","options","logVerbosityLevel","jsLogVerbosityLevel","prefix","isBackground","client","TdClient","disableLog","file","search","params","URLSearchParams","toLowerCase","stringToBoolean","parseInt","VERBOSITY_MIN","VERBOSITY_MAX","VERBOSITY_JS_MIN","VERBOSITY_JS_MAX","tag","replace","split","tagVerbosity","request","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","apiHash","version","i","packageJson","use_test_dc","api_id","api_hash","system_language_code","navigator","language","device_model","getBrowser","system_version","getOSName","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","_this2","ANIMATION_DURATION_200MS","ANIMATION_DURATION_300MS","ANIMATION_DURATION_500MS","EMOJI_PICKER_TIMEOUT_MS","CHAT_SLICE_LIMIT","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","MEDIA_SLICE_LIMIT","MESSAGE_SLICE_LIMIT","MUTED_VALUE_MAX","MUTED_VALUE_MIN","NOTIFICATIONS_DEBOUNCE_DELAY_MS","PHOTO_BIG_SIZE","PHOTO_DISPLAY_SIZE","PHOTO_DISPLAY_SMALL_SIZE","PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","POLL_QUESTION_LENGTH","POLL_QUESTION_HINT_LENGTH","POLL_QUESTION_MAX_LENGTH","POLL_OPTION_LENGTH","POLL_OPTION_HINT_LENGTH","POLL_OPTION_MAX_LENGTH","POLL_OPTIONS_MAX_COUNT","SERVICE_NOTIFICATIONS_USER_ID","STICKER_DISPLAY_SIZE","STICKER_HINT_DISPLAY_SIZE","STICKER_PREVIEW_DISPLAY_SIZE","STICKER_SMALL_DISPLAY_SIZE","PROFILE_PHOTO_BIG_SIZE","PROFILE_PHOTO_SMALL_SIZE","TYPING_OUTPUT_INTERVAL_S","USERNAME_LENGTH_MIN","MAX_SNACK","NOTIFICATION_AUTO_HIDE_DURATION_MS","THUMBNAIL_BLURRED_SIZE","PRELOAD_AUDIO_SIZE","PRELOAD_ANIMATION_SIZE","PRELOAD_DOCUMENT_SIZE","PRELOAD_STICKER_SIZE","PRELOAD_VOICENOTE_SIZE","PRELOAD_VIDEO_SIZE","PRELOAD_VIDEONOTE_SIZE","THUMBNAIL_PRIORITY","FILE_PRIORITY","OPTIMIZATIONS_FIRST_START","PLAYER_VOLUME_NORMAL","PLAYER_STARTTIME","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_PLAYBACKRATE_FAST","PLAYER_PROGRESS_TIMEOUT_MS","isValidPhoneNumber","orderCompare","getSize","getPhotoThumbnailSize","getPhotoSize","getFitSize","itemsInView","throttle","debounce","getLetters","readImageSize","formatPhoneNumber","arrayBufferToBase64","isAuthorizationReady","between","getDurationString","getRandomInt","libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__","_Constants__WEBPACK_IMPORTED_MODULE_1__","OSName","userAgent","indexOf","isEdge","documentMode","StyleMedia","phoneNumber","isBad","match","string","trim","Boolean","order1","order2","diff","sizes","dimension","useWidth","width","height","Math","abs","index","local","is_downloading_completed","currDiff","size","max","increaseToMax","floor","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","children","child","offsetTop","offsetHeight","scrollTop","func","wait","context","args","previous","later","leading","remaining","trailing","immediate","callNow","getFirstLetter","str","toUpperCase","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","src","readAsDataURL","number","unformattedNumber","startsWith","formatNumber","buffer","binary","bytes","Uint8Array","len","byteLength","fromCharCode","btoa","first","last","secondsTotal","hours","minutes","seconds","min","ceil","random","SignInControl","loading","onClientUpdateSetPhoneCanceled","onClientUpdateSetPhoneError","errorString","message","onClientUpdateSetPhoneResult","onUpdateOption","handleSuggestedLanguagePackId","languagePackId","OptionStore","loadLanguage","suggestedLanguage","handleNext","enteredPhone","openConfirmation","code","handleChange","event","target","handleKeyPress","preventDefault","handleDone","handleChangeLanguage","_this$props","classes","t","_this$state","react_default","FormControl_default","fullWidth","className","TextField_default","disabled","autoFocus","label","margin","onChange","onKeyPress","defaultValue","FormHelperText_default","Button_default","button","onClick","Typography_default","continueAtLanguage","Link_default","lng","enhance","compose","withTranslation","withStyles","fontWeight","textAlign","transform","position","left","right","bottom","ConfirmCodeControl","assertThisInitialized","handleBack","isValid","first_name","last_name","finally","onChangePhone","e","codeLength","codeInfo","getPhoneNumber","getCodeLength","subtitle","getSubtitle","maxLength","FormHelperText_FormHelperText_default","buttonLeft","buttonRight","marginRight","marginTop","marginLeft","PasswordControl","handleMouseDownPassword","handleClickShowPassword","showPassword","password","passwordHint","classNames","textField","InputLabel_default","htmlFor","Input_default","endAdornment","InputAdornment_default","IconButton_default","aria-label","onMouseDown","VisibilityOff_default","Visibility_default","root","display","flexWrap","withoutLabel","spacing","unit","flexBasis","AuthErrorDialog","handleAuthError","handleClose","handleKeyDown","Dialog_default","transitionDuration","onKeyDown","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","AuthFormControl","control","Components_Auth_SignInControl","terms_of_service","code_info","Components_Auth_ConfirmCodeControl","termsOfService","password_hint","has_recovery_email_address","recovery_email_address_pattern","Components_Auth_PasswordControl","hasRecoveryEmailAddress","recoveryEmailAddressPattern","authorizationFormContent","Auth_AuthErrorDialog","default","AppInactiveControl","handleReload","Button_Button_default","reload","InactivePage","Fragment","page","Components_Additional_AppInactiveControl","Footer","StubPage","page-third-column","dialogs-third-column","menuIconButton","Menu_default","headerIconButton","Search_default","dialog-details-third-column","objectSpread","grey","flex","MainPage","lazy","Promise","all","TelegramApp","onClientUpdateDatabaseExists","checkServiceWorker","cookieEnabled","registerServiceWorker","onUpdateFatalError","fatalError","onUpdateAuthorizationState","hasFocus","onClientUpdateAppInactive","inactive","handleChangePhone","handleDragOver","stopPropagation","handleDrop","handleRefresh","handleDestroy","Components_StubPage","Components_InactivePage","Suspense","fallback","Components_Auth_AuthFormControl","onDragOver","onDrop","aria-describedby","keyMap","openPinnedChat","_callee2","chats","pinnedIndex","_context2","offset_order","offset_chat_id","limit","sent","chat_ids","altKey","ctrlKey","t0","getMyId","force","_x2","onblur","clear","onfocus","history","pushState","href","onpopstate","go","@global","ReactDOM","render","react_router_dom","react_router","path","component","getElementById","option","isLocalhost","hostname","register","_register","swUrl","URL","process","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","_callee3","pushSubscription","endpoint","p256dh_base64url","auth_base64url","_context3","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","_callee4","response","_context4","fetch","status","headers","ready","unregister","_update","_callee6","_context6","setFullInfo","user_full_info","fullInfoItems","myId","fullInfo","withSaveRef","forwardRef","ref","react__WEBPACK_IMPORTED_MODULE_6___default","forwardedRef","withRestoreRef","_class","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","rest","E_Github_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","defaultNamespace","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChatInfo","ChannelInfo","Stickers","Emoji","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Loading","Connecting","Updating","ru","fallbackLng","interpolation","escapeValue","react","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","translationCurrentLng","addResourceBundle","only_local","info","_language","language_pack_id","processStrings","save","changeLanguage","languagePackStrings","strings","_x3","localization","PureComponent"],"mappings":"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","file":"static/js/main.b1dcb957.chunk.js","sourcesContent":["/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\r\n\r\nclass InputTypingManager {\r\n    constructor(chatId, timeoutCallback) {\r\n        this.actions = new Map();\r\n        this.timerId = null;\r\n        this.chatId = chatId;\r\n        this.timeoutCallback = timeoutCallback;\r\n\r\n        this.handleTimer = this.handleTimer.bind(this);\r\n        this.addAction = this.addAction.bind(this);\r\n        this.clearAction = this.clearAction.bind(this);\r\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\r\n    }\r\n\r\n    handleTimer() {\r\n        let now = new Date();\r\n        let expiredActions = [];\r\n        for (let [key, value] of this.actions) {\r\n            let actionTimeout = value.expire - now;\r\n            if (actionTimeout <= 0) expiredActions.push(key);\r\n        }\r\n\r\n        for (let key of expiredActions) {\r\n            this.actions.delete(key);\r\n        }\r\n\r\n        let update = {\r\n            '@type': 'updateUserChatAction',\r\n            chat_id: this.chatId,\r\n            action: { '@type': 'chatActionTimerUpdate' }\r\n        };\r\n\r\n        this.timeoutCallback(update);\r\n        // ChatStore.emit('updateUserChatAction', update);\r\n\r\n        this.setActionsTimeout();\r\n    }\r\n\r\n    addAction(userId, action) {\r\n        let expire = new Date();\r\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\r\n\r\n        this.actions.set(userId, { expire: expire, action: action });\r\n\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n        }\r\n\r\n        this.setActionsTimeout();\r\n    }\r\n\r\n    setActionsTimeout() {\r\n        let now = new Date();\r\n        let timeout = 1000000;\r\n        for (let [key, value] of this.actions) {\r\n            let actionTimeout = value.expire - now;\r\n            if (actionTimeout < timeout) timeout = actionTimeout;\r\n            if (timeout < 0) timeout = 0;\r\n        }\r\n\r\n        if (timeout < 1000000) {\r\n            this.timerId = setTimeout(this.handleTimer, timeout);\r\n        }\r\n    }\r\n\r\n    clearAction(userId) {\r\n        this.actions.delete(userId);\r\n\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n        }\r\n\r\n        this.setActionsTimeout();\r\n    }\r\n}\r\n\r\nexport default InputTypingManager;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport Cookies from 'universal-cookie';\r\nimport InputTypingManager from '../Utils/InputTypingManager';\r\nimport UserStore from './UserStore';\r\nimport TdLibController from '../Controllers/TdLibController';\r\n\r\nclass ChatStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.items = new Map();\r\n        this.typingManagers = new Map();\r\n        this.onlineMemberCount = new Map();\r\n        this.skippedUpdates = [];\r\n        this.loadClientData();\r\n\r\n        this.addTdLibListener();\r\n        this.setMaxListeners(Infinity);\r\n    }\r\n\r\n    loadClientData = () => {\r\n        const cookies = new Cookies();\r\n        const clientData = new Map();\r\n        try {\r\n            const data = cookies.get('clientData');\r\n            Object.keys(data).forEach(key => {\r\n                clientData.set(Number(key), data[key]);\r\n            });\r\n        } catch {}\r\n\r\n        this.clientData = clientData;\r\n    };\r\n\r\n    saveClientData = () => {\r\n        const arr = Array.from(this.clientData.entries());\r\n        const obj = arr.reduce((obj, [key, value]) => {\r\n            if (value) {\r\n                obj[String(key)] = value;\r\n            }\r\n            return obj;\r\n        }, {});\r\n\r\n        const cookies = new Cookies();\r\n        cookies.set('clientData', obj);\r\n    };\r\n\r\n    onUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'updateConnectionState': {\r\n                if (update.state['@type'] === 'connectionStateUpdating') {\r\n                    this.updating = true;\r\n                    this.skippedUpdates = [];\r\n                } else {\r\n                    this.updating = false;\r\n                    if (this.skippedUpdates.length > 0) {\r\n                        TdLibController.parameters.fastUpdating = false;\r\n                        this.emitUpdate({\r\n                            '@type': 'clientUpdateFastUpdatingComplete',\r\n                            updates: this.skippedUpdates\r\n                        });\r\n                        this.skippedUpdates = [];\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case 'updateChatDefaultDisableNotification': {\r\n                //TODO: handle updateChatDefaultDisableNotification\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatOnlineMemberCount': {\r\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatDraftMessage': {\r\n                const { chat_id, order, draft_message } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, {\r\n                        order: order === '0' ? chat.order : order,\r\n                        draft_message\r\n                    });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatIsMarkedAsUnread': {\r\n                const { chat_id, is_marked_as_unread } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { is_marked_as_unread });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatIsPinned': {\r\n                const { chat_id, order, is_pinned } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, {\r\n                        order: order === '0' ? chat.order : order,\r\n                        is_pinned\r\n                    });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatIsSponsored': {\r\n                const { chat_id, order, is_sponsored } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, {\r\n                        order: order === '0' ? chat.order : order,\r\n                        is_sponsored\r\n                    });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatLastMessage': {\r\n                const { chat_id, order, last_message } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, {\r\n                        order: order === '0' ? chat.order : order,\r\n                        last_message\r\n                    });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatNotificationSettings': {\r\n                const { chat_id, notification_settings } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { notification_settings });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatOrder': {\r\n                const { chat_id, order } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { order });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatPhoto': {\r\n                const { chat_id, photo } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { photo });\r\n\r\n                    switch (chat.type['@type']) {\r\n                        case 'chatTypeBasicGroup': {\r\n                            break;\r\n                        }\r\n                        case 'chatTypeSupergroup': {\r\n                            break;\r\n                        }\r\n                        case 'chatTypePrivate':\r\n                        case 'chatTypeSecret': {\r\n                            const user = UserStore.get(chat.type.user_id);\r\n                            if (user) {\r\n                                UserStore.assign(user, { profile_photo: update.photo });\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatPinnedMessage': {\r\n                const { chat_id, pinned_message_id } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { pinned_message_id });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatReadInbox': {\r\n                const { chat_id, last_read_inbox_message_id, unread_count } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { last_read_inbox_message_id, unread_count });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatReadOutbox': {\r\n                const { chat_id, last_read_outbox_message_id } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { last_read_outbox_message_id });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatReplyMarkup': {\r\n                const { chat_id, reply_markup_message_id } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { reply_markup_message_id });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatTitle': {\r\n                const { chat_id, title } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { title });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateChatUnreadMentionCount': {\r\n                const { chat_id, unread_mention_count } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { unread_mention_count });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateNewChat': {\r\n                this.set(update.chat);\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateSecretChat': {\r\n                //TODO: handle updateSecretChat\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateUnreadChatCount': {\r\n                //TODO: handle updateUnreadChatCount\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateUserChatAction': {\r\n                let typingManager = this.getTypingManager(update.chat_id);\r\n                if (!typingManager) {\r\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\r\n                    this.setTypingManager(update.chat_id, typingManager);\r\n                }\r\n\r\n                const key = update.user_id;\r\n                if (update.action['@type'] === 'chatActionCancel') {\r\n                    typingManager.clearAction(key);\r\n                } else {\r\n                    typingManager.addAction(key, update.action);\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            case 'updateMessageMentionRead': {\r\n                const { chat_id, unread_mention_count } = update;\r\n\r\n                const chat = this.get(chat_id);\r\n                if (chat) {\r\n                    this.assign(chat, { unread_mention_count });\r\n                }\r\n\r\n                this.emitFastUpdate(update);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    onClientUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'clientUpdateClearHistory': {\r\n                this.emitUpdate(update);\r\n                break;\r\n            }\r\n            case 'clientUpdateLeaveChat': {\r\n                this.emitUpdate(update);\r\n                break;\r\n            }\r\n            case 'clientUpdateOpenChat': {\r\n                this.emitUpdate(update);\r\n                break;\r\n            }\r\n            case 'clientUpdateSetChatClientData': {\r\n                const { chatId, clientData } = update;\r\n\r\n                TdLibController.send({\r\n                    '@type': 'setChatClientData',\r\n                    chat_id: chatId,\r\n                    client_data: JSON.stringify(clientData)\r\n                });\r\n                this.setClientData(chatId, clientData);\r\n                this.saveClientData();\r\n\r\n                this.emitUpdate(update);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    emitUpdate = update => {\r\n        this.emit(update['@type'], update);\r\n    };\r\n\r\n    emitFastUpdate = update => {\r\n        if (this.updating && TdLibController.parameters.fastUpdating) {\r\n            this.skippedUpdates.push(update);\r\n            return;\r\n        }\r\n\r\n        this.emit(update['@type'], update);\r\n    };\r\n\r\n    addTdLibListener = () => {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    removeTdLibListener = () => {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    assign(source1, source2) {\r\n        //Object.assign(source1, source2);\r\n        this.set(Object.assign({}, source1, source2));\r\n    }\r\n\r\n    get(chatId) {\r\n        return this.items.get(chatId);\r\n    }\r\n\r\n    set(chat) {\r\n        this.items.set(chat.id, chat);\r\n    }\r\n\r\n    getClientData(chatId) {\r\n        return this.clientData.get(chatId) || {};\r\n    }\r\n\r\n    setClientData(chatId, data) {\r\n        this.clientData.set(chatId, data);\r\n    }\r\n\r\n    setOnlineMemberCount(chatId, onlineMemberCount) {\r\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\r\n    }\r\n\r\n    getOnlineMemberCount(chatId) {\r\n        return this.onlineMemberCount.get(chatId) || 0;\r\n    }\r\n\r\n    getTypingManager(chatId) {\r\n        return this.typingManagers.get(chatId);\r\n    }\r\n\r\n    setTypingManager(chatId, typingManager) {\r\n        return this.typingManagers.set(chatId, typingManager);\r\n    }\r\n}\r\n\r\nconst store = new ChatStore();\r\nwindow.chat = store;\r\nexport default store;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nconst borderStyle = theme => ({\r\n    borderColor: {\r\n        borderColor: theme.palette.divider\r\n    }\r\n});\r\n\r\nconst accentStyles = theme => ({\r\n    accentColorLight: {\r\n        color: theme.palette.primary.light\r\n    },\r\n    accentColorDark: {\r\n        color: theme.palette.primary.dark\r\n    },\r\n    accentColorMain: {\r\n        color: theme.palette.primary.main\r\n    },\r\n    accentBackgroundLight: {\r\n        background: theme.palette.primary.light\r\n    },\r\n    accentBackgroundDark: {\r\n        background: theme.palette.primary.dark\r\n    }\r\n});\r\n\r\nexport { borderStyle, accentStyles };\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport { I18nextProvider } from 'react-i18next';\r\nimport { getDisplayName } from './Utils/HOC';\r\nimport LocalizationStore from './Stores/LocalizationStore';\r\n\r\nfunction withLanguage(WrappedComponent) {\r\n    class LanguageWrapper extends React.Component {\r\n        render() {\r\n            const i18n = LocalizationStore.i18n;\r\n\r\n            return (\r\n                <I18nextProvider i18n={i18n}>\r\n                    <WrappedComponent {...this.props} />\r\n                </I18nextProvider>\r\n            );\r\n        }\r\n    }\r\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\r\n\r\n    return LanguageWrapper;\r\n}\r\n\r\nexport default withLanguage;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport StylesProvider from '@material-ui/styles/StylesProvider';\r\nimport { getDisplayName } from './Utils/HOC';\r\nimport Cookies from 'universal-cookie';\r\nimport ApplicationStore from './Stores/ApplicationStore';\r\n\r\nfunction withTheme(WrappedComponent) {\r\n    class ThemeWrapper extends React.Component {\r\n        constructor(props) {\r\n            super(props);\r\n\r\n            const cookies = new Cookies();\r\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\r\n\r\n            let theme = createMuiTheme({\r\n                palette: {\r\n                    type: type,\r\n                    primary: primary,\r\n                    secondary: { main: '#FF5555' }\r\n                },\r\n                typography: {\r\n                    useNextVariants: true\r\n                }\r\n            });\r\n\r\n            this.state = {\r\n                theme: theme\r\n            };\r\n        }\r\n\r\n        componentDidMount() {\r\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\r\n        }\r\n\r\n        onClientUpdateThemeChanging = update => {\r\n            const { type, primary } = update;\r\n\r\n            const theme = createMuiTheme({\r\n                palette: {\r\n                    type: type,\r\n                    primary: primary,\r\n                    secondary: { main: '#FF5555' },\r\n                    typography: {\r\n                        useNextVariants: true\r\n                    }\r\n                }\r\n            });\r\n\r\n            const cookies = new Cookies();\r\n            cookies.set('themeOptions', { type: type, primary: primary });\r\n\r\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\r\n        };\r\n\r\n        render() {\r\n            const { theme } = this.state;\r\n\r\n            return (\r\n                <StylesProvider injectFirst>\r\n                    <MuiThemeProvider theme={theme}>\r\n                        <WrappedComponent {...this.props} />\r\n                    </MuiThemeProvider>\r\n                </StylesProvider>\r\n            );\r\n        }\r\n    }\r\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\r\n\r\n    return ThemeWrapper;\r\n}\r\n\r\nexport default withTheme;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nclass ActionScheduler {\r\n    constructor(actionCallback, cancelCallback) {\r\n        this.actions = new Map();\r\n        this.actionCallback = actionCallback;\r\n        this.cancelCallback = cancelCallback;\r\n    }\r\n\r\n    add = (key, timeout, action, cancel) => {\r\n        if (this.actions.has(key)) {\r\n            return false;\r\n        }\r\n\r\n        let expire = new Date();\r\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\r\n\r\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\r\n\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n        }\r\n\r\n        this.setTimeout();\r\n\r\n        return true;\r\n    };\r\n\r\n    invoke = async key => {\r\n        const item = this.actions.get(key);\r\n        if (!item) return;\r\n\r\n        this.actions.delete(key);\r\n\r\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\r\n        if (item.action) await item.action();\r\n\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n        }\r\n\r\n        this.setTimeout();\r\n    };\r\n\r\n    remove = key => {\r\n        const item = this.actions.get(key);\r\n        if (!item) return;\r\n\r\n        this.actions.delete(key);\r\n\r\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\r\n        if (item.cancel) item.cancel();\r\n\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n        }\r\n\r\n        this.setTimeout();\r\n    };\r\n\r\n    setTimeout = () => {\r\n        let now = new Date();\r\n        let timeout = 1000000;\r\n        for (let [key, value] of this.actions) {\r\n            let actionTimeout = value.expire - now;\r\n            if (actionTimeout < timeout) timeout = actionTimeout;\r\n            if (timeout < 0) timeout = 0;\r\n        }\r\n\r\n        if (timeout < 1000000) {\r\n            this.timerId = setTimeout(this.handleTimer, timeout);\r\n        }\r\n    };\r\n\r\n    handleTimer = () => {\r\n        let now = new Date();\r\n        let expired = [];\r\n        for (let [key, value] of this.actions) {\r\n            let actionTimeout = value.expire - now;\r\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\r\n        }\r\n\r\n        for (let item of expired) {\r\n            this.actions.delete(item.key);\r\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\r\n            if (item.value.action) item.value.action();\r\n        }\r\n\r\n        this.setTimeout();\r\n    };\r\n}\r\n\r\nexport default ActionScheduler;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport TdLibController from '../Controllers/TdLibController';\r\nimport ActionScheduler from '../Utils/ActionScheduler';\r\n\r\nclass ApplicationStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.setPhoneNumberRequest = null;\r\n        this.chatId = 0;\r\n        this.dialogChatId = 0;\r\n        this.messageId = null;\r\n        this.statistics = new Map();\r\n        this.scopeNotificationSettings = new Map();\r\n        this.authorizationState = null;\r\n        this.defaultPhone = null;\r\n        this.connectionState = null;\r\n        this.isChatDetailsVisible = false;\r\n        this.mediaViewerContent = null;\r\n        this.profileMediaViewerContent = null;\r\n        this.dragging = false;\r\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\r\n\r\n        this.addTdLibListener();\r\n        this.addStatistics();\r\n        this.setMaxListeners(Infinity);\r\n    }\r\n\r\n    addScheduledAction = (key, timeout, action, cancel) => {\r\n        return this.actionScheduler.add(key, timeout, action, cancel);\r\n    };\r\n\r\n    invokeScheduledAction = async key => {\r\n        await this.actionScheduler.invoke(key);\r\n    };\r\n\r\n    removeScheduledAction = key => {\r\n        this.actionScheduler.remove(key);\r\n    };\r\n\r\n    handleScheduledAction = item => {\r\n        console.log('Invoked scheduled action key=', item.key);\r\n    };\r\n\r\n    handleCancelScheduledAction = item => {\r\n        console.log('Cancel scheduled action key=', item.key);\r\n    };\r\n\r\n    onUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'updateAuthorizationState': {\r\n                this.authorizationState = update.authorization_state;\r\n\r\n                switch (update.authorization_state['@type']) {\r\n                    case 'authorizationStateLoggingOut':\r\n                        this.loggingOut = true;\r\n                        break;\r\n                    case 'authorizationStateWaitTdlibParameters':\r\n                        TdLibController.sendTdParameters();\r\n                        break;\r\n                    case 'authorizationStateWaitEncryptionKey':\r\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\r\n                        break;\r\n                    case 'authorizationStateWaitPhoneNumber': {\r\n                        if (this.setPhoneNumberRequest) {\r\n                            this.setPhoneNumberRequest();\r\n\r\n                            this.setPhoneNumberRequest = null;\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n                    case 'authorizationStateWaitCode':\r\n                        break;\r\n                    case 'authorizationStateWaitPassword':\r\n                        break;\r\n                    case 'authorizationStateReady':\r\n                        this.loggingOut = false;\r\n                        this.setPhoneNumberRequest = null;\r\n                        break;\r\n                    case 'authorizationStateClosing':\r\n                        break;\r\n                    case 'authorizationStateClosed':\r\n                        if (!this.loggingOut) {\r\n                            document.title += ': Zzz';\r\n                            this.emit('clientUpdateAppInactive');\r\n                        } else {\r\n                            TdLibController.init();\r\n                        }\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            case 'updateConnectionState': {\r\n                this.connectionState = update.state;\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            case 'updateScopeNotificationSettings': {\r\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            case 'updateFatalError': {\r\n                this.emit(update['@type'], update);\r\n\r\n                break;\r\n            }\r\n            case 'updateServiceNotification': {\r\n                const { type, content } = update;\r\n\r\n                if (!content) return;\r\n                if (content['@type'] === 'messageText') {\r\n                    const { text } = content;\r\n                    if (!text) return;\r\n\r\n                    if (text['@type'] === 'formattedText' && text.text) {\r\n                        switch (type) {\r\n                            case 'AUTH_KEY_DROP_DUPLICATE':\r\n                                let result = window.confirm(text.text);\r\n                                if (result) {\r\n                                    TdLibController.logOut();\r\n                                }\r\n                                break;\r\n                            default:\r\n                                alert(text.text);\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    onClientUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'clientUpdateChatId': {\r\n                const extendedUpdate = {\r\n                    '@type': 'clientUpdateChatId',\r\n                    nextChatId: update.chatId,\r\n                    nextMessageId: update.messageId,\r\n                    previousChatId: this.chatId,\r\n                    previousMessageId: this.messageId\r\n                };\r\n\r\n                this.chatId = update.chatId;\r\n                this.messageId = update.messageId;\r\n\r\n                this.emit('clientUpdateChatId', extendedUpdate);\r\n                break;\r\n            }\r\n            case 'clientUpdateDatabaseExists': {\r\n                this.emit('clientUpdateDatabaseExists', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateSetPhone': {\r\n                const { phone } = update;\r\n\r\n                this.defaultPhone = phone;\r\n\r\n                if (!phone) {\r\n                    this.setPhoneNumberRequest = null;\r\n                    TdLibController.clientUpdate({\r\n                        '@type': 'clientUpdateSetPhoneCanceled'\r\n                    });\r\n                } else {\r\n                    if (\r\n                        this.authorizationState &&\r\n                        this.authorizationState['@type'] === 'authorizationStateWaitPhoneNumber'\r\n                    ) {\r\n                        this.setPhoneNumber(phone);\r\n                    } else {\r\n                        this.setPhoneNumberRequest = () => this.setPhoneNumber(phone);\r\n                    }\r\n                }\r\n\r\n                this.emit('clientUpdateSetPhone', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateSetPhoneResult': {\r\n                this.emit('clientUpdateSetPhoneResult', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateSetPhoneError': {\r\n                this.emit('clientUpdateSetPhoneError', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateDialogChatId': {\r\n                const { chatId } = update;\r\n                this.dialogChatId = chatId;\r\n\r\n                this.emit('clientUpdateDialogChatId', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateFocusWindow': {\r\n                TdLibController.send({\r\n                    '@type': 'setOption',\r\n                    name: 'online',\r\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\r\n                });\r\n\r\n                this.emit('clientUpdateFocusWindow', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateForward': {\r\n                this.emit('clientUpdateForward', update);\r\n                break;\r\n            }\r\n            case 'clientUpdateLeaveChat': {\r\n                if (update.inProgress && this.chatId === update.chatId) {\r\n                    TdLibController.setChatId(0);\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    setPhoneNumber = phone => {\r\n        TdLibController.send({\r\n            '@type': 'setAuthenticationPhoneNumber',\r\n            phone_number: phone\r\n        })\r\n            .then(result => {\r\n                TdLibController.clientUpdate({\r\n                    '@type': 'clientUpdateSetPhoneResult',\r\n                    result\r\n                });\r\n            })\r\n            .catch(error => {\r\n                TdLibController.clientUpdate({\r\n                    '@type': 'clientUpdateSetPhoneError',\r\n                    error\r\n                });\r\n            });\r\n    };\r\n\r\n    onUpdateStatistics = update => {\r\n        if (!update) return;\r\n\r\n        if (this.statistics.has(update['@type'])) {\r\n            const count = this.statistics.get(update['@type']);\r\n\r\n            this.statistics.set(update['@type'], count + 1);\r\n        } else {\r\n            this.statistics.set(update['@type'], 1);\r\n        }\r\n    };\r\n\r\n    addTdLibListener = () => {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    removeTdLibListener = () => {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    addStatistics = () => {\r\n        TdLibController.addListener('update', this.onUpdateStatistics);\r\n    };\r\n\r\n    setChatId = (chatId, messageId = null) => {\r\n        const update = {\r\n            '@type': 'clientUpdateChatId',\r\n            nextChatId: chatId,\r\n            nextMessageId: messageId,\r\n            previousChatId: this.chatId,\r\n            previousMessageId: this.messageId\r\n        };\r\n\r\n        this.chatId = chatId;\r\n        this.messageId = messageId;\r\n        this.emit(update['@type'], update);\r\n    };\r\n\r\n    getChatId() {\r\n        return this.chatId;\r\n    }\r\n\r\n    getMessageId() {\r\n        return this.messageId;\r\n    }\r\n\r\n    searchChat(chatId) {\r\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\r\n    }\r\n\r\n    changeChatDetailsVisibility(visibility) {\r\n        this.isChatDetailsVisible = visibility;\r\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\r\n    }\r\n\r\n    setMediaViewerContent(content) {\r\n        this.mediaViewerContent = content;\r\n        this.emit('clientUpdateMediaViewerContent', content);\r\n    }\r\n\r\n    setProfileMediaViewerContent(content) {\r\n        this.profileMediaViewerContent = content;\r\n        this.emit('clientUpdateProfileMediaViewerContent', content);\r\n    }\r\n\r\n    getConnectionState() {\r\n        return this.connectionState;\r\n    }\r\n\r\n    getAuthorizationState() {\r\n        return this.authorizationState;\r\n    }\r\n\r\n    getNotificationSettings(scope) {\r\n        return this.scopeNotificationSettings.get(scope);\r\n    }\r\n\r\n    setNotificationSettings(scope, notificationSettings) {\r\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\r\n    }\r\n\r\n    getDragging = () => {\r\n        return this.dragging;\r\n    };\r\n\r\n    setDragging = value => {\r\n        this.dragging = value;\r\n        this.emit('clientUpdateDragging', value);\r\n    };\r\n\r\n    assign(source1, source2) {\r\n        Object.assign(source1, source2);\r\n        //this.set(Object.assign({}, source1, source2));\r\n    }\r\n}\r\n\r\nconst store = new ApplicationStore();\r\nwindow.application = store;\r\nexport default store;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport packageJson from '../../package.json';\r\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\r\nimport { VERBOSITY_JS_MAX, VERBOSITY_JS_MIN, VERBOSITY_MAX, VERBOSITY_MIN } from '../Constants';\r\nimport TdClient from 'tdweb/dist/tdweb';\r\n\r\nfunction databaseExists(dbname, callback) {\r\n    var req = indexedDB.open(dbname);\r\n    var existed = true;\r\n    req.onsuccess = function() {\r\n        req.result.close();\r\n        if (!existed) indexedDB.deleteDatabase(dbname);\r\n        callback(existed);\r\n    };\r\n    req.onupgradeneeded = function() {\r\n        existed = false;\r\n    };\r\n}\r\n\r\nclass TdLibController extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.parameters = {\r\n            useTestDC: false,\r\n            readOnly: false,\r\n            verbosity: 1,\r\n            jsVerbosity: 3,\r\n            fastUpdating: true,\r\n            useDatabase: false,\r\n            mode: 'wasm'\r\n        };\r\n\r\n        this.disableLog = false;\r\n\r\n        this.setMaxListeners(Infinity);\r\n    }\r\n\r\n    init = location => {\r\n        this.setParameters(location);\r\n\r\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\r\n        const dbName = useTestDC ? 'tdlib_test' : 'tdlib';\r\n\r\n        databaseExists(dbName, exists => {\r\n            this.clientUpdate({ '@type': 'clientUpdateDatabaseExists', exists });\r\n\r\n            let options = {\r\n                logVerbosityLevel: verbosity,\r\n                jsLogVerbosityLevel: jsVerbosity,\r\n                mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\r\n                prefix: useTestDC ? 'tdlib_test' : 'tdlib',\r\n                readOnly: readOnly,\r\n                isBackground: false,\r\n                useDatabase: useDatabase\r\n                // onUpdate: update => this.emit('update', update)\r\n            };\r\n\r\n            console.log(\r\n                `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\r\n            );\r\n\r\n            this.client = new TdClient(options);\r\n            this.client.onUpdate = update => {\r\n                if (!this.disableLog) {\r\n                    if (update['@type'] === 'updateFile') {\r\n                        console.log('receive updateFile file_id=' + update.file.id, update);\r\n                    } else {\r\n                        console.log('receive update', update);\r\n                    }\r\n                }\r\n                this.emit('update', update);\r\n            };\r\n        });\r\n    };\r\n\r\n    clientUpdate = update => {\r\n        if (!this.disableLog) {\r\n            console.log('clientUpdate', update);\r\n        }\r\n        this.emit('clientUpdate', update);\r\n    };\r\n\r\n    setParameters = location => {\r\n        if (!location) return;\r\n\r\n        const { search } = location;\r\n        if (!search) return;\r\n\r\n        const params = new URLSearchParams(search.toLowerCase());\r\n\r\n        if (params.has('test')) {\r\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\r\n        }\r\n\r\n        if (params.has('verbosity')) {\r\n            const verbosity = parseInt(params.get('verbosity'), 10);\r\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\r\n                this.parameters.verbosity = verbosity;\r\n            }\r\n        }\r\n\r\n        if (params.has('jsverbosity')) {\r\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\r\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\r\n                this.parameters.jsVerbosity = jsVerbosity;\r\n            }\r\n        }\r\n\r\n        if (params.has('tag') && params.has('tagverbosity')) {\r\n            const tag = params\r\n                .get('tag')\r\n                .replace('[', '')\r\n                .replace(']', '')\r\n                .split(',');\r\n            const tagVerbosity = params\r\n                .get('tagverbosity')\r\n                .replace('[', '')\r\n                .replace(']', '')\r\n                .split(',');\r\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\r\n                this.parameters.tag = tag;\r\n                this.parameters.tagVerbosity = tagVerbosity;\r\n            }\r\n        }\r\n\r\n        if (params.has('readonly')) {\r\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\r\n        }\r\n\r\n        if (params.has('fastupdating')) {\r\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\r\n        }\r\n\r\n        if (params.has('db')) {\r\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\r\n        }\r\n        if (params.has('mode')) {\r\n            this.parameters.mode = params.get('mode');\r\n        }\r\n    };\r\n\r\n    send = request => {\r\n        if (!this.disableLog) {\r\n            console.log('send', request);\r\n            return this.client\r\n                .send(request)\r\n                .then(result => {\r\n                    console.log('receive', result);\r\n                    return result;\r\n                })\r\n                .catch(error => {\r\n                    console.error('catch', error);\r\n\r\n                    throw error;\r\n                });\r\n        } else {\r\n            return this.client.send(request);\r\n        }\r\n    };\r\n\r\n    sendTdParameters = async () => {\r\n        const apiId = 176756;\r\n        const apiHash = \"265f0d7066f885c9b75490c38b4ec475\";\r\n\r\n        if (!apiId || !apiHash) {\r\n            if (\r\n                window.confirm(\r\n                    'API id is missing!\\n' +\r\n                        'In order to obtain an API id and develop your own application ' +\r\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\r\n                )\r\n            ) {\r\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\r\n            }\r\n        }\r\n\r\n        const { useTestDC } = this.parameters;\r\n        const { version } = packageJson;\r\n\r\n        this.send({\r\n            '@type': 'setTdlibParameters',\r\n            parameters: {\r\n                '@type': 'tdParameters',\r\n                use_test_dc: useTestDC,\r\n                api_id: apiId,\r\n                api_hash: apiHash,\r\n                system_language_code: navigator.language || 'en',\r\n                device_model: getBrowser(),\r\n                system_version: getOSName(),\r\n                application_version: version,\r\n                use_secret_chats: false,\r\n                use_message_database: true,\r\n                use_file_database: false,\r\n                database_directory: '/db',\r\n                files_directory: '/'\r\n            }\r\n            // ,\r\n            // extra: {\r\n            //     a: ['a', 'b'],\r\n            //     b: 123\r\n            // }\r\n        });\r\n\r\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\r\n            for (let i = 0; i < this.parameters.tag.length; i++) {\r\n                let tag = this.parameters.tag[i];\r\n                let tagVerbosity = this.parameters.tagVerbosity[i];\r\n\r\n                this.send({\r\n                    '@type': 'setLogTagVerbosityLevel',\r\n                    tag: tag,\r\n                    new_verbosity_level: tagVerbosity\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    logOut() {\r\n        this.send({ '@type': 'logOut' }).catch(error => {\r\n            this.emit('tdlib_auth_error', error);\r\n        });\r\n    }\r\n\r\n    setChatId = (chatId, messageId = null) => {\r\n        const update = {\r\n            '@type': 'clientUpdateChatId',\r\n            chatId: chatId,\r\n            messageId: messageId\r\n        };\r\n\r\n        this.clientUpdate(update);\r\n    };\r\n\r\n    setMediaViewerContent(content) {\r\n        this.clientUpdate({\r\n            '@type': 'clientUpdateMediaViewerContent',\r\n            content: content\r\n        });\r\n    }\r\n}\r\n\r\nconst controller = new TdLibController();\r\n\r\nexport default controller;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nexport const ANIMATION_FRAME_DURATION_MS = 40;\r\nexport const ANIMATION_DURATION_200MS = 200;\r\nexport const ANIMATION_DURATION_300MS = 300;\r\nexport const ANIMATION_DURATION_500MS = 500;\r\nexport const EMOJI_PICKER_TIMEOUT_MS = 100;\r\nexport const CHAT_SLICE_LIMIT = 25;\r\nexport const LOCATION_HEIGHT = 150;\r\nexport const LOCATION_SCALE = 2;\r\nexport const LOCATION_WIDTH = 300;\r\nexport const LOCATION_ZOOM = 16;\r\nexport const MEDIA_SLICE_LIMIT = 20;\r\nexport const MESSAGE_SLICE_LIMIT = 20;\r\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\r\nexport const MUTED_VALUE_MIN = 0;\r\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\r\nexport const PHOTO_BIG_SIZE = 1280;\r\nexport const PHOTO_DISPLAY_SIZE = 260;\r\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\r\nexport const PHOTO_SIZE = 320;\r\nexport const PHOTO_THUMBNAIL_SIZE = 90;\r\nexport const POLL_QUESTION_LENGTH = 255;\r\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\r\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\r\nexport const POLL_OPTION_LENGTH = 100;\r\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\r\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\r\nexport const POLL_OPTIONS_MAX_COUNT = 10;\r\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\r\nexport const STICKER_DISPLAY_SIZE = 192;\r\nexport const STICKER_HINT_DISPLAY_SIZE = 76;\r\nexport const STICKER_PREVIEW_DISPLAY_SIZE = 256;\r\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\r\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\r\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\r\nexport const TYPING_INPUT_INTERVAL_S = 8;\r\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\r\nexport const VERBOSITY_JS_MAX = 20;\r\nexport const VERBOSITY_JS_MIN = 0;\r\nexport const VERBOSITY_MAX = 20;\r\nexport const VERBOSITY_MIN = 0;\r\nexport const USERNAME_LENGTH_MIN = 5;\r\nexport const MAX_SNACK = 10;\r\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\r\nexport const THUMBNAIL_BLURRED_SIZE = 320;\r\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\r\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\r\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\r\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\r\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\r\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\r\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\r\nexport const THUMBNAIL_PRIORITY = 32;\r\nexport const FILE_PRIORITY = 1;\r\nexport const OPTIMIZATIONS_FIRST_START = true;\r\nexport const PLAYER_VOLUME_NORMAL = 0.25;\r\nexport const PLAYER_STARTTIME = 0.0;\r\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\r\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\r\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { formatNumber } from 'libphonenumber-js';\r\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\r\n\r\nfunction getOSName() {\r\n    let OSName = 'Unknown';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\r\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\r\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\r\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\r\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\r\n\r\n    return OSName;\r\n}\r\n\r\nfunction getBrowser() {\r\n    let browser_name = '';\r\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n    let isEdge = !isIE && !!window.StyleMedia;\r\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\r\n        browser_name = 'Chrome';\r\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\r\n        browser_name = 'Safari';\r\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\r\n        browser_name = 'Firefox';\r\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\r\n        //IF IE > 10\r\n        browser_name = 'IE';\r\n    } else if (isEdge) {\r\n        browser_name = 'Edge';\r\n    } else {\r\n        browser_name = 'Unknown';\r\n    }\r\n\r\n    return browser_name;\r\n}\r\n\r\nfunction isValidPhoneNumber(phoneNumber) {\r\n    if (!phoneNumber) return false;\r\n\r\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\r\n    if (!isBad) {\r\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\r\n        if (phoneNumber.length < 7) {\r\n            isBad = true;\r\n        }\r\n    }\r\n\r\n    return !isBad;\r\n}\r\n\r\nfunction stringToBoolean(string) {\r\n    switch (string.toLowerCase().trim()) {\r\n        case 'true':\r\n        case 'yes':\r\n        case '1':\r\n            return true;\r\n        case 'false':\r\n        case 'no':\r\n        case '0':\r\n        case null:\r\n            return false;\r\n        default:\r\n            return Boolean(string);\r\n    }\r\n}\r\n\r\nfunction orderCompare(order1, order2) {\r\n    let diff = order1.length - order2.length;\r\n    if (diff !== 0) return diff < 0 ? -1 : 1;\r\n    if (order1 === order2) return 0;\r\n\r\n    return order1 > order2 ? 1 : -1;\r\n}\r\n\r\nfunction getPhotoThumbnailSize(sizes) {\r\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\r\n}\r\n\r\nfunction getPhotoSize(sizes) {\r\n    return getSize(sizes, PHOTO_SIZE);\r\n}\r\n\r\nfunction getSize(sizes, dimension) {\r\n    if (!sizes) return null;\r\n    if (sizes.length === 0) return null;\r\n    if (dimension === 0) return null;\r\n\r\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\r\n    // if (iSize){\r\n    //     return iSize;\r\n    // }\r\n\r\n    let useWidth = sizes[0].width >= sizes[0].height;\r\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\r\n    let index = 0;\r\n    for (let i = 1; i < sizes.length; i++) {\r\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\r\n            continue;\r\n        }\r\n\r\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\r\n        if (currDiff < diff) {\r\n            index = i;\r\n            currDiff = diff;\r\n        }\r\n    }\r\n\r\n    return sizes[index];\r\n}\r\n\r\nfunction getFitSize(size, max, increaseToMax = true) {\r\n    if (!size) return { width: 0, height: 0 };\r\n\r\n    if (!increaseToMax) {\r\n        if (size.width < max && size.height < max) {\r\n            return size;\r\n        }\r\n    }\r\n\r\n    if (size.width > size.height) {\r\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\r\n    }\r\n\r\n    return { width: Math.floor((size.width * max) / size.height), height: max };\r\n}\r\n\r\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\r\n    let scrollContainer = scrollContainerRef.current;\r\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\r\n\r\n    const items = [];\r\n    for (let i = 0; i < itemsContainer.children.length; i++) {\r\n        let child = itemsContainer.children[i];\r\n        if (\r\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\r\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\r\n        ) {\r\n            items.push(i);\r\n        }\r\n    }\r\n\r\n    return items;\r\n}\r\n\r\n// Returns a function, that, when invoked, will only be triggered at most once\r\n// during a given window of time. Normally, the throttled function will run\r\n// as much as it can, without ever going more than once per `wait` duration;\r\n// but if you'd like to disable the execution on the leading edge, pass\r\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\r\nfunction throttle(func, wait, options) {\r\n    var context, args, result;\r\n    var timeout = null;\r\n    var previous = 0;\r\n    if (!options) options = {};\r\n    var later = function() {\r\n        previous = options.leading === false ? 0 : Date.now();\r\n        timeout = null;\r\n        result = func.apply(context, args);\r\n        if (!timeout) context = args = null;\r\n    };\r\n    return function() {\r\n        var now = Date.now();\r\n        if (!previous && options.leading === false) previous = now;\r\n        var remaining = wait - (now - previous);\r\n        context = this;\r\n        args = arguments;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        } else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n        return result;\r\n    };\r\n}\r\n\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this,\r\n            args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (!immediate) {\r\n                func.apply(context, args);\r\n            }\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) {\r\n            func.apply(context, args);\r\n        }\r\n    };\r\n}\r\n\r\nfunction getFirstLetter(str) {\r\n    if (!str) return '';\r\n    for (let i = 0; i < str.length; i++) {\r\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\r\n            return str[i];\r\n        } else if (str[i] >= '0' && str[i] <= '9') {\r\n            return str[i];\r\n        }\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nfunction getLetters(title) {\r\n    if (!title) return null;\r\n    if (title.length === 0) return null;\r\n\r\n    let split = title.split(' ');\r\n    if (split.length > 1) {\r\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nfunction readImageSize(file, callback) {\r\n    let useBlob = false;\r\n    // Create a new FileReader instance\r\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\r\n    var reader = new FileReader();\r\n\r\n    // Once a file is successfully readed:\r\n    reader.addEventListener('load', function() {\r\n        // At this point `reader.result` contains already the Base64 Data-URL\r\n        // and we've could immediately show an image using\r\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\r\n        // But we want to get that image's width and height px values!\r\n        // Since the File Object does not hold the size of an image\r\n        // we need to create a new image and assign it's src, so when\r\n        // the image is loaded we can calculate it's width and height:\r\n        var image = new Image();\r\n        image.addEventListener('load', function() {\r\n            // Concatenate our HTML image info\r\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\r\n            //     image.width  +''+ // But get the width from our `image`\r\n            //     image.height +' '+\r\n            //     file.type    +' '+\r\n            //     Math.round(file.size/1024) +'KB';\r\n\r\n            //alert(imageInfo);\r\n            file.photoWidth = image.width;\r\n            file.photoHeight = image.height;\r\n            // Finally append our created image and the HTML info string to our `#preview`\r\n            //elPreview.appendChild( this );\r\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\r\n\r\n            // If we set the variable `useBlob` to true:\r\n            // (Data-URLs can end up being really large\r\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\r\n            // Blobs are usually faster and the image src will hold a shorter blob name\r\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\r\n            if (useBlob) {\r\n                // Free some memory for optimal performance\r\n                window.URL.revokeObjectURL(image.src);\r\n            }\r\n\r\n            callback(file);\r\n        });\r\n\r\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\r\n    });\r\n\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\nfunction formatPhoneNumber(number) {\r\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\r\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\r\n    return formattedNumber || unformattedNumber;\r\n}\r\n\r\n/**\r\n * use this to make a Base64 encoded string URL friendly,\r\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\r\n * characters are removed\r\n *\r\n * @param {String} str the encoded string\r\n * @returns {String} the URL friendly encoded String\r\n */\r\nfunction Base64EncodeUrl(str) {\r\n    return str\r\n        .replace(/\\+/g, '-')\r\n        .replace(/\\//g, '_')\r\n        .replace(/\\=+$/, '');\r\n}\r\n\r\n/**\r\n * Use this to recreate a Base64 encoded string that was made URL friendly\r\n * using Base64EncodeurlFriendly.\r\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\r\n *\r\n * @param {String} str the encoded string\r\n * @returns {String} the URL friendly encoded String\r\n */\r\nfunction Base64DecodeUrl(str) {\r\n    str = (str + '===').slice(0, str.length + (str.length % 4));\r\n    return str.replace(/-/g, '+').replace(/_/g, '/');\r\n}\r\n\r\nfunction arrayBufferToBase64(buffer) {\r\n    var binary = '';\r\n    var bytes = new Uint8Array(buffer);\r\n    var len = bytes.byteLength;\r\n    for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return Base64EncodeUrl(window.btoa(binary));\r\n}\r\n\r\nfunction isAuthorizationReady(state) {\r\n    if (!state) return false;\r\n\r\n    return state['@type'] === 'authorizationStateReady';\r\n}\r\n\r\nfunction between(item, first, last) {\r\n    return item > first && item < last;\r\n}\r\n\r\nfunction getDurationString(secondsTotal) {\r\n    let hours = Math.floor(secondsTotal / 3600);\r\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\r\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\r\n\r\n    if (hours > 0 && minutes < 10) {\r\n        minutes = '0' + minutes;\r\n    }\r\n    if (seconds < 10) {\r\n        seconds = '0' + seconds;\r\n    }\r\n\r\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nexport {\r\n    getBrowser,\r\n    getOSName,\r\n    isValidPhoneNumber,\r\n    stringToBoolean,\r\n    orderCompare,\r\n    getSize,\r\n    getPhotoThumbnailSize,\r\n    getPhotoSize,\r\n    getFitSize,\r\n    itemsInView,\r\n    throttle,\r\n    debounce,\r\n    getLetters,\r\n    readImageSize,\r\n    formatPhoneNumber,\r\n    arrayBufferToBase64,\r\n    isAuthorizationReady,\r\n    between,\r\n    getDurationString,\r\n    getRandomInt\r\n};\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { compose } from 'recompose';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Link from '@material-ui/core/Link';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { isValidPhoneNumber } from '../../Utils/Common';\r\nimport ApplicationStore from '../../Stores/ApplicationStore';\r\nimport OptionStore from '../../Stores/OptionStore';\r\nimport LocalizationStore from '../../Stores/LocalizationStore';\r\nimport TdLibController from '../../Controllers/TdLibController';\r\nimport './SignInControl.css';\r\n\r\nconst styles = {\r\n    button: {\r\n        margin: '16px 0 0 0'\r\n    },\r\n    phone: {\r\n        fontWeight: 'bold',\r\n        textAlign: 'center'\r\n    },\r\n    continueAtLanguage: {\r\n        transform: 'translateY(100px)',\r\n        textAlign: 'center',\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0\r\n    }\r\n};\r\n\r\nclass SignInControl extends React.Component {\r\n    state = {\r\n        error: null,\r\n        loading: false\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.handleSuggestedLanguagePackId();\r\n\r\n        ApplicationStore.on('clientUpdateSetPhoneCanceled', this.onClientUpdateSetPhoneCanceled);\r\n        ApplicationStore.on('clientUpdateSetPhoneError', this.onClientUpdateSetPhoneError);\r\n        ApplicationStore.on('clientUpdateSetPhoneResult', this.onClientUpdateSetPhoneResult);\r\n        OptionStore.on('updateOption', this.onUpdateOption);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        ApplicationStore.removeListener('clientUpdateSetPhoneCanceled', this.onClientUpdateSetPhoneCanceled);\r\n        ApplicationStore.removeListener('clientUpdateSetPhoneError', this.onClientUpdateSetPhoneError);\r\n        ApplicationStore.removeListener('clientUpdateSetPhoneResult', this.onClientUpdateSetPhoneResult);\r\n        OptionStore.removeListener('updateOption', this.onUpdateOption);\r\n    }\r\n\r\n    onClientUpdateSetPhoneCanceled = update => {\r\n        this.setState({ loading: false });\r\n    };\r\n\r\n    onClientUpdateSetPhoneError = update => {\r\n        const { error } = update;\r\n\r\n        let errorString = null;\r\n        if (error && error['@type'] === 'error' && error.message) {\r\n            errorString = error.message;\r\n        } else {\r\n            errorString = JSON.stringify(error);\r\n        }\r\n\r\n        this.setState({ error: { string: errorString }, loading: false });\r\n    };\r\n\r\n    onClientUpdateSetPhoneResult = update => {\r\n        this.setState({ loading: false });\r\n    };\r\n\r\n    onUpdateOption = update => {\r\n        const { name } = update;\r\n\r\n        if (name === 'suggested_language_pack_id') {\r\n            this.handleSuggestedLanguagePackId();\r\n        }\r\n    };\r\n\r\n    handleSuggestedLanguagePackId = () => {\r\n        const { i18n } = this.props;\r\n        if (!i18n) return;\r\n\r\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\r\n        if (!languagePackId) return;\r\n\r\n        const { value } = languagePackId;\r\n        if (value === i18n.language) {\r\n            this.setState({ suggestedLanguage: null });\r\n            return;\r\n        }\r\n\r\n        LocalizationStore.loadLanguage(value).then(() => {\r\n            this.setState({ suggestedLanguage: value });\r\n        });\r\n    };\r\n\r\n    handleNext = () => {\r\n        const { defaultPhone } = this.props;\r\n\r\n        const phone = this.enteredPhone || defaultPhone;\r\n\r\n        if (isValidPhoneNumber(phone)) {\r\n            this.setState({ error: null, openConfirmation: true });\r\n        } else {\r\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\r\n        }\r\n    };\r\n\r\n    handleChange = event => {\r\n        this.enteredPhone = event.target.value;\r\n    };\r\n\r\n    handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            event.preventDefault();\r\n            this.handleNext();\r\n        }\r\n    };\r\n\r\n    handleDone = () => {\r\n        const { defaultPhone } = this.props;\r\n\r\n        const phone = this.enteredPhone || defaultPhone;\r\n        if (!isValidPhoneNumber(phone)) {\r\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\r\n            return;\r\n        }\r\n\r\n        this.setState({ error: null, loading: true });\r\n        TdLibController.clientUpdate({\r\n            '@type': 'clientUpdateSetPhone',\r\n            phone\r\n        });\r\n    };\r\n\r\n    handleChangeLanguage = () => {\r\n        const { i18n } = this.props;\r\n        const { suggestedLanguage } = this.state;\r\n\r\n        if (!i18n) return;\r\n        if (!suggestedLanguage) return;\r\n\r\n        this.setState({ suggestedLanguage: i18n.language });\r\n\r\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\r\n    };\r\n\r\n    render() {\r\n        const { defaultPhone, classes, t } = this.props;\r\n        const { loading, error, suggestedLanguage } = this.state;\r\n\r\n        let errorString = '';\r\n        if (error) {\r\n            const { code, string } = error;\r\n            if (code) {\r\n                errorString = t(code);\r\n            } else {\r\n                errorString = string;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth>\r\n                <div className='authorization-header'>\r\n                    <span className='authorization-header-content'>{t('YourPhone')}</span>\r\n                </div>\r\n                <div>{t('StartText')}</div>\r\n                <TextField\r\n                    color='primary'\r\n                    disabled={loading}\r\n                    error={Boolean(errorString)}\r\n                    fullWidth\r\n                    autoFocus\r\n                    id='phoneNumber'\r\n                    label=''\r\n                    margin='normal'\r\n                    onChange={this.handleChange}\r\n                    onKeyPress={this.handleKeyPress}\r\n                    defaultValue={defaultPhone}\r\n                />\r\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\r\n                <div className='sign-in-actions'>\r\n                    <Button\r\n                        fullWidth\r\n                        color='primary'\r\n                        disabled={loading}\r\n                        className={classes.button}\r\n                        onClick={this.handleDone}>\r\n                        {t('Next')}\r\n                    </Button>\r\n                    <Typography className={classes.continueAtLanguage}>\r\n                        <Link onClick={this.handleChangeLanguage}>\r\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\r\n                        </Link>\r\n                    </Typography>\r\n                </div>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nSignInControl.propTypes = {\r\n    defaultPhone: PropTypes.string\r\n};\r\n\r\nconst enhance = compose(\r\n    withTranslation(),\r\n    withStyles(styles, { withTheme: true })\r\n);\r\n\r\nexport default enhance(SignInControl);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport './ConfirmCodeControl.css';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { formatPhoneNumber } from '../../Utils/Common';\r\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\r\nimport TdLibController from '../../Controllers/TdLibController';\r\n\r\nconst styles = {\r\n    buttonLeft: {\r\n        marginRight: '8px',\r\n        marginTop: '16px'\r\n    },\r\n    buttonRight: {\r\n        marginLeft: '8px',\r\n        marginTop: '16px'\r\n    }\r\n};\r\n\r\nclass ConfirmCodeControl extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            error: '',\r\n            loading: false\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleNext = this.handleNext.bind(this);\r\n        this.handleBack = this.handleBack.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    }\r\n\r\n    handleNext() {\r\n        if (this.code && this.isValid(this.code)) {\r\n            this.setState({ error: '' });\r\n            this.handleDone();\r\n        } else {\r\n            this.setState({ error: 'Invalid code. Please try again.' });\r\n        }\r\n    }\r\n\r\n    handleDone() {\r\n        const code = this.code;\r\n\r\n        this.setState({ loading: true });\r\n        TdLibController.send({\r\n            '@type': 'checkAuthenticationCode',\r\n            code: code,\r\n            first_name: 'A',\r\n            last_name: 'B'\r\n        })\r\n            .then(result => {})\r\n            .catch(error => {\r\n                let errorString = null;\r\n                if (error && error['@type'] === 'error' && error.message) {\r\n                    errorString = error.message;\r\n                } else {\r\n                    errorString = JSON.stringify(error);\r\n                }\r\n\r\n                this.setState({ error: errorString });\r\n            })\r\n            .finally(() => {\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    handleBack() {\r\n        this.props.onChangePhone();\r\n    }\r\n\r\n    isValid(code) {\r\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\r\n        if (!isBad) {\r\n            code = code.replace(/\\D/g, '');\r\n            if (code.length !== 5) {\r\n                isBad = true;\r\n            }\r\n        }\r\n\r\n        return !isBad;\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.code = e.target.value;\r\n\r\n        if (this.code && this.codeLength > 0 && this.code.length === this.codeLength) {\r\n            this.handleNext();\r\n        }\r\n    }\r\n\r\n    handleKeyPress(e) {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            this.handleNext();\r\n        }\r\n    }\r\n\r\n    getPhoneNumber(codeInfo) {\r\n        if (!codeInfo) return null;\r\n        return codeInfo.phone_number;\r\n    }\r\n\r\n    getCodeLength(codeInfo) {\r\n        if (!codeInfo) return 0;\r\n        if (!codeInfo.type) return 0;\r\n\r\n        switch (codeInfo.type['@type']) {\r\n            case 'authenticationCodeTypeCall': {\r\n                return codeInfo.type.length;\r\n            }\r\n            case 'authenticationCodeTypeFlashCall': {\r\n                return 0;\r\n            }\r\n            case 'authenticationCodeTypeSms': {\r\n                return codeInfo.type.length;\r\n            }\r\n            case 'authenticationCodeTypeTelegramMessage': {\r\n                return codeInfo.type.length;\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    getSubtitle(codeInfo) {\r\n        if (!codeInfo) return 'Subtitle';\r\n        if (!codeInfo.type) return 'Subtitle';\r\n\r\n        switch (codeInfo.type['@type']) {\r\n            case 'authenticationCodeTypeCall': {\r\n                return 'Telegram dialed your number';\r\n            }\r\n            case 'authenticationCodeTypeFlashCall': {\r\n                return 'Telegram dialed your number';\r\n            }\r\n            case 'authenticationCodeTypeSms': {\r\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\r\n            }\r\n            case 'authenticationCodeTypeTelegramMessage': {\r\n                return \"Please enter the code you've just received in your previous Telegram app.\";\r\n            }\r\n        }\r\n\r\n        return 'Subtitle';\r\n    }\r\n\r\n    render() {\r\n        const { loading, error } = this.state;\r\n        const { classes, codeInfo } = this.props;\r\n\r\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\r\n        this.codeLength = this.getCodeLength(codeInfo);\r\n        const subtitle = this.getSubtitle(codeInfo);\r\n\r\n        const title = this.phoneNumber ? formatPhoneNumber(this.phoneNumber) : 'Your Code';\r\n\r\n        return (\r\n            <FormControl fullWidth>\r\n                <div className='authorization-header'>\r\n                    <span className='authorization-header-content'>{title}</span>\r\n                </div>\r\n                <div>{subtitle}</div>\r\n                <TextField\r\n                    color='primary'\r\n                    disabled={loading}\r\n                    error={Boolean(error)}\r\n                    fullWidth\r\n                    autoFocus\r\n                    label='Your code'\r\n                    margin='normal'\r\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\r\n                    onChange={this.handleChange}\r\n                    onKeyPress={this.handleKeyPress}\r\n                />\r\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\r\n                <div className='authorization-actions'>\r\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\r\n                        Back\r\n                    </Button>\r\n                    <Button\r\n                        fullWidth\r\n                        color='primary'\r\n                        className={classes.buttonRight}\r\n                        onClick={this.handleNext}\r\n                        disabled={loading}>\r\n                        Next\r\n                    </Button>\r\n                </div>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ConfirmCodeControl);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Input from '@material-ui/core/Input';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Button from '@material-ui/core/Button';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport TdLibController from '../../Controllers/TdLibController';\r\nimport './PasswordControl.css';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap'\r\n    },\r\n    margin: {\r\n        margin: '16px 0 8px 0'\r\n    },\r\n    withoutLabel: {\r\n        marginTop: theme.spacing.unit * 3\r\n    },\r\n    textField: {\r\n        flexBasis: 200\r\n    },\r\n    buttonLeft: {\r\n        marginRight: '8px',\r\n        marginTop: '16px'\r\n    },\r\n    buttonRight: {\r\n        marginLeft: '8px',\r\n        marginTop: '16px'\r\n    }\r\n});\r\n\r\nclass PasswordControl extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            password: '',\r\n            showPassword: false,\r\n            error: ''\r\n        };\r\n\r\n        this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\r\n        this.handleMouseDownPassword = this.handleMouseDownPassword.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n        this.handleBack = this.handleBack.bind(this);\r\n        this.handleNext = this.handleNext.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n    }\r\n\r\n    handleNext() {\r\n        if (this.password) {\r\n            this.setState({ error: '' });\r\n            this.handleDone();\r\n        } else {\r\n            this.setState({ error: 'Invalid password. Please try again.' });\r\n        }\r\n    }\r\n\r\n    handleBack() {\r\n        this.props.onChangePhone();\r\n    }\r\n\r\n    handleDone() {\r\n        const password = this.password;\r\n\r\n        this.setState({ loading: true });\r\n        TdLibController.send({\r\n            '@type': 'checkAuthenticationPassword',\r\n            password: password\r\n        })\r\n            .then(result => {})\r\n            .catch(error => {\r\n                let errorString = null;\r\n                if (error && error['@type'] === 'error' && error.message) {\r\n                    errorString = error.message;\r\n                } else {\r\n                    errorString = JSON.stringify(error);\r\n                }\r\n\r\n                this.setState({ error: errorString });\r\n            })\r\n            .finally(() => {\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    handleMouseDownPassword = event => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    handleClickShowPassword = () => {\r\n        this.setState({ showPassword: !this.state.showPassword });\r\n    };\r\n\r\n    handleChange(e) {\r\n        this.password = e.target.value;\r\n    }\r\n\r\n    handleKeyPress(e) {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            this.handleNext();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { loading, error, showPassword } = this.state;\r\n        const { passwordHint, classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <div className='authorization-header'>\r\n                    <span className='authorization-header-content'>Cloud Password Check</span>\r\n                </div>\r\n                <div>Please enter your cloud password.</div>\r\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\r\n                    <InputLabel htmlFor='adornment-password' error={Boolean(error)}>\r\n                        Your cloud password\r\n                    </InputLabel>\r\n                    <Input\r\n                        fullWidth\r\n                        autoFocus\r\n                        id='adornment-password'\r\n                        type={showPassword ? 'text' : 'password'}\r\n                        disabled={loading}\r\n                        error={Boolean(error)}\r\n                        onChange={this.handleChange}\r\n                        onKeyPress={this.handleKeyPress}\r\n                        endAdornment={\r\n                            <InputAdornment position='end'>\r\n                                <IconButton\r\n                                    aria-label='Toggle password visibility'\r\n                                    onClick={this.handleClickShowPassword}\r\n                                    onMouseDown={this.handleMouseDownPassword}>\r\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        }\r\n                    />\r\n                </FormControl>\r\n                {passwordHint && (\r\n                    <FormHelperText id='password-hint-text'>\r\n                        <span className='password-hint-label'>Hint: </span>\r\n                        {passwordHint}\r\n                    </FormHelperText>\r\n                )}\r\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\r\n                <div className='authorization-actions'>\r\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\r\n                        Back\r\n                    </Button>\r\n                    <Button\r\n                        fullWidth\r\n                        color='primary'\r\n                        className={classes.buttonRight}\r\n                        onClick={this.handleNext}\r\n                        disabled={loading}>\r\n                        Next\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(PasswordControl);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TdLibController from '../../Controllers/TdLibController';\r\n\r\nclass AuthErrorDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            open: false,\r\n            error: null\r\n        };\r\n\r\n        this.handleAuthError = this.handleAuthError.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\r\n    }\r\n\r\n    handleAuthError(error) {\r\n        this.setState({\r\n            open: true,\r\n            error: error\r\n        });\r\n    }\r\n\r\n    handleClose() {\r\n        this.setState({\r\n            open: false\r\n        });\r\n    }\r\n\r\n    handleKeyDown(e) {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            this.handleClose();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let errorString = null;\r\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\r\n            errorString = this.state.error.message;\r\n        } else {\r\n            errorString = JSON.stringify(this.state.error);\r\n        }\r\n\r\n        return (\r\n            <Dialog\r\n                transitionDuration={0}\r\n                open={this.state.open}\r\n                onKeyDown={this.handleKeyDown}\r\n                onClose={this.handleClose}\r\n                aria-labelledby='form-dialog-title'>\r\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>{errorString}</DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleClose} color='primary'>\r\n                        Ok\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AuthErrorDialog;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport SignInControl from './SignInControl';\r\nimport ConfirmCodeControl from './ConfirmCodeControl';\r\nimport PasswordControl from './PasswordControl';\r\nimport AuthErrorDialog from './AuthErrorDialog';\r\nimport ApplicationStore from '../../Stores/ApplicationStore';\r\nimport './AuthFormControl.css';\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: '20px'\r\n    },\r\n    authorizationFormContent: {\r\n        background: theme.palette.background.default,\r\n        color: theme.palette.text.primary\r\n    }\r\n});\r\n\r\nclass AuthFormControl extends React.Component {\r\n    render() {\r\n        const { classes, authorizationState } = this.props;\r\n        const { defaultPhone } = ApplicationStore;\r\n\r\n        let control = null;\r\n        switch (authorizationState['@type']) {\r\n            case 'authorizationStateWaitPhoneNumber':\r\n            case 'authorizationStateWaitEncryptionKey':\r\n            case 'authorizationStateWaitTdlibParameters':\r\n            case 'authorizationStateWaitTdlib': {\r\n                // control = (\r\n                //     <>\r\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\r\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\r\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\r\n                //         <SignUpControl/>\r\n                //     </>);\r\n                control = <SignInControl defaultPhone={defaultPhone} />;\r\n                break;\r\n            }\r\n            case 'authorizationStateWaitCode': {\r\n                const { onChangePhone } = this.props;\r\n                const { terms_of_service, code_info } = authorizationState;\r\n\r\n                control = (\r\n                    <ConfirmCodeControl\r\n                        termsOfService={terms_of_service}\r\n                        codeInfo={code_info}\r\n                        onChangePhone={onChangePhone}\r\n                    />\r\n                );\r\n                break;\r\n            }\r\n            case 'authorizationStateWaitPassword': {\r\n                const { onChangePhone } = this.props;\r\n                const {\r\n                    password_hint,\r\n                    has_recovery_email_address,\r\n                    recovery_email_address_pattern\r\n                } = authorizationState;\r\n\r\n                control = (\r\n                    <PasswordControl\r\n                        passwordHint={password_hint}\r\n                        hasRecoveryEmailAddress={has_recovery_email_address}\r\n                        recoveryEmailAddressPattern={recovery_email_address_pattern}\r\n                        onChangePhone={onChangePhone}\r\n                    />\r\n                );\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <div className='sign-in-wrap'>\r\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\r\n                    {control}\r\n                </div>\r\n                <AuthErrorDialog />\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withStyles(styles)(AuthFormControl);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button/Button';\r\nimport './AppInactiveControl.css';\r\n\r\nclass AppInactiveControl extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    static handleReload() {\r\n        window.location.reload();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='app-inactive'>\r\n                <div className='app-inactive-wrapper'>\r\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\r\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\r\n                    <div className='app-inactive-description'>\r\n                        Telegram supports only one active tab with the app.\r\n                        <br />\r\n                        Please reload this page to continue using this tab or close it.\r\n                    </div>\r\n                    <div className='app-inactive-actions'>\r\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\r\n                            Reload app\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AppInactiveControl;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport AppInactiveControl from './Additional/AppInactiveControl';\r\nimport Footer from './Footer';\r\n\r\nconst styles = theme => ({\r\n    page: {\r\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\r\n        color: theme.palette.text.primary\r\n    }\r\n});\r\n\r\nclass InactivePage extends React.Component {\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <div className='header-wrapper' />\r\n                <div className={classNames(classes.page, 'page')}>\r\n                    <AppInactiveControl />\r\n                </div>\r\n                <Footer />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nInactivePage.propTypes = {};\r\n\r\nexport default withStyles(styles)(InactivePage);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { compose } from 'recompose';\r\nimport { withTranslation } from 'react-i18next';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { borderStyle } from './Theme';\r\nimport Footer from './Footer';\r\nimport './ColumnMiddle/Header.css';\r\nimport './ColumnLeft/Dialogs.css';\r\nimport './ColumnMiddle/DialogDetails.css';\r\nimport '../TelegramApp.css';\r\n\r\nconst styles = theme => ({\r\n    page: {\r\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\r\n        color: theme.palette.text.primary\r\n    },\r\n    menuIconButton: {\r\n        margin: '8px -2px 8px 12px'\r\n    },\r\n    headerIconButton: {\r\n        margin: '8px 12px 8px 0'\r\n    },\r\n    background: {\r\n        background: theme.palette.type === 'dark' ? theme.palette.grey[900] : 'transparent',\r\n        flex: '1 1 auto'\r\n    },\r\n    ...borderStyle(theme)\r\n});\r\n\r\nclass StubPage extends React.Component {\r\n    render() {\r\n        const { classes, title, t } = this.props;\r\n        const isChatDetailsVisible = false;\r\n\r\n        return (\r\n            <>\r\n                <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\r\n                    <div\r\n                        className={classNames(classes.borderColor, 'dialogs', {\r\n                            'dialogs-third-column': isChatDetailsVisible\r\n                        })}>\r\n                        <div className='header-master'>\r\n                            <IconButton className={classes.menuIconButton} aria-label='Menu'>\r\n                                <MenuIcon />\r\n                            </IconButton>\r\n                            <div className='header-status grow cursor-pointer'>\r\n                                <span className='header-status-content'>{t('AppName')}</span>\r\n                            </div>\r\n                            <IconButton className={classes.headerIconButton} aria-label={t('Search')}>\r\n                                <SearchIcon />\r\n                            </IconButton>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className={classNames('dialog-details', {\r\n                            'dialog-details-third-column': isChatDetailsVisible\r\n                        })}>\r\n                        <div className={classNames(classes.borderColor, 'header-details')}>\r\n                            <div className={classNames('header-status', 'grow', 'cursor-default')}>\r\n                                <span className='header-status-content'>{title}</span>\r\n                                {Boolean(title) && (\r\n                                    <>\r\n                                        <span className='header-progress'>.</span>\r\n                                        <span className='header-progress'>.</span>\r\n                                        <span className='header-progress'>.</span>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        <div className={classes.background} />\r\n                    </div>\r\n                </div>\r\n                <Footer />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nStubPage.propTypes = {\r\n    title: PropTypes.string\r\n};\r\n\r\nconst enhance = compose(\r\n    withStyles(styles),\r\n    withTranslation()\r\n);\r\n\r\nexport default enhance(StubPage);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport Cookies from 'universal-cookie';\r\nimport { compose } from 'recompose';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport { withTranslation } from 'react-i18next';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport packageJson from '../package.json';\r\nimport withLanguage from './Language';\r\nimport withTheme from './Theme';\r\nimport AuthFormControl from './Components/Auth/AuthFormControl';\r\nimport InactivePage from './Components/InactivePage';\r\nimport StubPage from './Components/StubPage';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\r\nimport ChatStore from './Stores/ChatStore';\r\nimport UserStore from './Stores/UserStore';\r\nimport ApplicationStore from './Stores/ApplicationStore';\r\nimport TdLibController from './Controllers/TdLibController';\r\nimport './TelegramApp.css';\r\n\r\nconst MainPage = React.lazy(() => import('./Components/MainPage'));\r\n\r\nconst styles = theme => ({\r\n    '@global': {\r\n        a: {\r\n            color: theme.palette.primary.main\r\n        },\r\n        code: {\r\n            color: theme.palette.primary.dark\r\n        }\r\n    }\r\n});\r\n\r\nclass TelegramApp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        console.log(`Start Telegram Web ${packageJson.version}`);\r\n\r\n        this.state = {\r\n            authorizationState: null,\r\n            databaseExists: true,\r\n            inactive: false,\r\n            fatalError: false\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        const { location } = this.props;\r\n\r\n        TdLibController.init(location);\r\n    }\r\n\r\n    componentDidMount() {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n\r\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\r\n        ApplicationStore.on('clientUpdateDatabaseExists', this.onClientUpdateDatabaseExists);\r\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\r\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n\r\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\r\n        ApplicationStore.removeListener('clientUpdateDatabaseExists', this.onClientUpdateDatabaseExists);\r\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\r\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\r\n    }\r\n\r\n    onClientUpdateDatabaseExists = update => {\r\n        const { exists } = update;\r\n\r\n        if (!exists) {\r\n            this.setState({\r\n                authorizationState: {\r\n                    '@type': 'authorizationStateWaitTdlib'\r\n                },\r\n                databaseExists: exists\r\n            });\r\n        }\r\n    };\r\n\r\n    onUpdate = update => {\r\n        if (OPTIMIZATIONS_FIRST_START) {\r\n            if (!this.checkServiceWorker) {\r\n                this.checkServiceWorker = true;\r\n\r\n                const cookieEnabled = navigator.cookieEnabled;\r\n                if (cookieEnabled) {\r\n                    const cookies = new Cookies();\r\n                    const register = cookies.get('register');\r\n                    if (!register) {\r\n                        registerServiceWorker();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    onUpdateFatalError = update => {\r\n        this.setState({ fatalError: true });\r\n    };\r\n\r\n    onUpdateAuthorizationState = update => {\r\n        const { authorization_state: authorizationState } = update;\r\n\r\n        this.setState({ authorizationState });\r\n\r\n        if (!window.hasFocus) return;\r\n        if (!authorizationState) return;\r\n        if (authorizationState['@type'] !== 'authorizationStateReady') return;\r\n\r\n        TdLibController.send({\r\n            '@type': 'setOption',\r\n            name: 'online',\r\n            value: { '@type': 'optionValueBoolean', value: true }\r\n        });\r\n    };\r\n\r\n    onClientUpdateAppInactive = update => {\r\n        this.setState({ inactive: true });\r\n    };\r\n\r\n    handleChangePhone = () => {\r\n        this.setState({\r\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\r\n        });\r\n    };\r\n\r\n    handleDragOver = event => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    };\r\n\r\n    handleDrop = event => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    };\r\n\r\n    handleRefresh = () => {\r\n        this.setState({ fatalError: false });\r\n        window.location.reload();\r\n    };\r\n\r\n    handleDestroy = () => {\r\n        this.setState({ fatalError: false });\r\n        TdLibController.send({ '@type': 'destroy' });\r\n    };\r\n\r\n    handleKeyDown = event => {\r\n        //console.log('KeyDown', event);\r\n    };\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        const { inactive, authorizationState, databaseExists, fatalError } = this.state;\r\n\r\n        const loading = t('Loading').replace('...', '');\r\n        let page = <StubPage title={loading} />;\r\n\r\n        if (inactive) {\r\n            page = <InactivePage />;\r\n        } else if (authorizationState) {\r\n            switch (authorizationState['@type']) {\r\n                case 'authorizationStateClosed':\r\n                case 'authorizationStateClosing':\r\n                case 'authorizationStateLoggingOut':\r\n                case 'authorizationStateReady': {\r\n                    page = (\r\n                        <React.Suspense fallback={<StubPage title='' />}>\r\n                            <MainPage />\r\n                        </React.Suspense>\r\n                    );\r\n                    break;\r\n                }\r\n                case 'authorizationStateWaitCode':\r\n                case 'authorizationStateWaitPassword':\r\n                case 'authorizationStateWaitPhoneNumber':\r\n                case 'authorizationStateWaitTdlib':\r\n                    page = (\r\n                        <AuthFormControl\r\n                            authorizationState={authorizationState}\r\n                            onChangePhone={this.handleChangePhone}\r\n                        />\r\n                    );\r\n                    break;\r\n                case 'authorizationStateWaitEncryptionKey':\r\n                case 'authorizationStateWaitTdlibParameters': {\r\n                    if (!databaseExists) {\r\n                        page = (\r\n                            <AuthFormControl\r\n                                authorizationState={authorizationState}\r\n                                onChangePhone={this.handleChangePhone}\r\n                            />\r\n                        );\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\r\n                {page}\r\n                <Dialog\r\n                    transitionDuration={0}\r\n                    open={fatalError}\r\n                    onClose={this.handleRefresh}\r\n                    aria-labelledby='fatal-error-dialog-title'\r\n                    aria-describedby='fatal-error-dialog-description'>\r\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id='fatal-error-dialog-description'>\r\n                            Oops! Something went wrong. We need to refresh this page.\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleDestroy} color='primary'>\r\n                            Log out\r\n                        </Button>\r\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\r\n                            Refresh\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst keyMap = new Map();\r\nwindow.keyMap = keyMap;\r\n\r\nasync function openPinnedChat(index) {\r\n    const chats = await TdLibController.send({\r\n        '@type': 'getChats',\r\n        offset_order: '9223372036854775807',\r\n        offset_chat_id: 0,\r\n        limit: 10\r\n    });\r\n\r\n    if (chats) {\r\n        let pinnedIndex = -1;\r\n        for (let i = 0; i < chats.chat_ids.length; i++) {\r\n            const chat = ChatStore.get(chats.chat_ids[i]);\r\n            if (chat && chat.is_pinned) {\r\n                pinnedIndex++;\r\n            }\r\n\r\n            if (pinnedIndex === index) {\r\n                TdLibController.setChatId(chat.id);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ndocument.addEventListener('keyup', event => {\r\n    keyMap.delete(event.key);\r\n    //console.log('keyup key=' + event.key, keyMap);\r\n});\r\n\r\ndocument.addEventListener('keydown', async event => {\r\n    keyMap.set(event.key, event.key);\r\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\r\n\r\n    const { authorizationState } = ApplicationStore;\r\n    if (!authorizationState) return;\r\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\r\n    if (keyMap.size > 3) return;\r\n\r\n    if (event.altKey && event.ctrlKey) {\r\n        switch (event.key) {\r\n            case '0': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                const chat = await TdLibController.send({\r\n                    '@type': 'createPrivateChat',\r\n                    user_id: UserStore.getMyId(),\r\n                    force: true\r\n                });\r\n\r\n                if (chat) {\r\n                    TdLibController.setChatId(chat.id);\r\n                }\r\n                break;\r\n            }\r\n            case '1': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                openPinnedChat(0);\r\n                break;\r\n            }\r\n            case '2': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                openPinnedChat(1);\r\n                break;\r\n            }\r\n            case '3': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                openPinnedChat(2);\r\n                break;\r\n            }\r\n            case '4': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                openPinnedChat(3);\r\n                break;\r\n            }\r\n            case '5': {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                openPinnedChat(4);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nwindow.hasFocus = true;\r\n\r\n// set offline on page lost focus\r\nwindow.onblur = function() {\r\n    keyMap.clear();\r\n    //console.log('window.blur key', keyMap);\r\n\r\n    const { authorizationState } = ApplicationStore;\r\n\r\n    if (!authorizationState) return;\r\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\r\n\r\n    window.hasFocus = false;\r\n\r\n    TdLibController.clientUpdate({\r\n        '@type': 'clientUpdateFocusWindow',\r\n        focused: false\r\n    });\r\n};\r\n\r\n// set online on page get focus\r\nwindow.onfocus = function() {\r\n    keyMap.clear();\r\n    //console.log('window.focus key', keyMap);\r\n    const { authorizationState } = ApplicationStore;\r\n\r\n    if (!authorizationState) return;\r\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\r\n\r\n    window.hasFocus = true;\r\n\r\n    TdLibController.clientUpdate({\r\n        '@type': 'clientUpdateFocusWindow',\r\n        focused: true\r\n    });\r\n};\r\n\r\n// disable back navigation\r\nwindow.history.pushState(null, null, window.location.href);\r\nwindow.onpopstate = function() {\r\n    window.history.go(1);\r\n};\r\n\r\nconst enhance = compose(\r\n    withLanguage,\r\n    withTranslation(),\r\n    withTheme,\r\n    withStyles(styles)\r\n);\r\n\r\nexport default enhance(TelegramApp);\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport TelegramApp from './TelegramApp';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport Cookies from 'universal-cookie';\r\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n    <Router>\r\n        <Route path='' component={TelegramApp} />\r\n    </Router>,\r\n    document.getElementById('root')\r\n);\r\n\r\nif (OPTIMIZATIONS_FIRST_START) {\r\n    const cookieEnabled = navigator.cookieEnabled;\r\n    if (cookieEnabled) {\r\n        const cookies = new Cookies();\r\n        const register = cookies.get('register');\r\n        if (register) {\r\n            registerServiceWorker();\r\n        }\r\n    } else {\r\n        registerServiceWorker();\r\n    }\r\n} else {\r\n    registerServiceWorker();\r\n}\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport TdLibController from '../Controllers/TdLibController';\r\n\r\nclass OptionStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.items = new Map();\r\n\r\n        this.addTdLibListener();\r\n        this.setMaxListeners(Infinity);\r\n    }\r\n\r\n    onUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'updateOption':\r\n                this.items.set(update.name, update.value);\r\n\r\n                this.emit('updateOption', update);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    onClientUpdate = update => {};\r\n\r\n    addTdLibListener = () => {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    removeTdLibListener = () => {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    get(name) {\r\n        return this.items.get(name);\r\n    }\r\n}\r\n\r\nconst store = new OptionStore();\r\nwindow.option = store;\r\nexport default store;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { arrayBufferToBase64 } from './Utils/Common';\r\nimport Cookies from 'universal-cookie';\r\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\r\nimport ApplicationStore from './Stores/ApplicationStore';\r\nimport TdLibController from './Controllers/TdLibController';\r\n\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === '[::1]' ||\r\n        // 127.0.0.1/8 is considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport default async function register() {\r\n    console.log('[SW] Register');\r\n\r\n    if (OPTIMIZATIONS_FIRST_START) {\r\n        const cookies = new Cookies();\r\n        cookies.set('register', true);\r\n    }\r\n\r\n    if ('serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        const serviceWorkerName =\r\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\r\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\r\n        console.log(`[SW] Service worker url: ${swUrl}`);\r\n\r\n        if (!isLocalhost) {\r\n            // Is not local host. Just register service worker\r\n            await registerValidSW(swUrl);\r\n        } else {\r\n            // This is running on localhost. Lets check if a service worker still exists or not.\r\n            await checkValidServiceWorker(swUrl);\r\n        }\r\n    }\r\n}\r\n\r\nasync function registerValidSW(swUrl) {\r\n    console.log('[SW] RegisterValidSW');\r\n    try {\r\n        const registration = await navigator.serviceWorker.register(swUrl);\r\n        registration.onupdatefound = () => {\r\n            const installingWorker = registration.installing;\r\n            installingWorker.onstatechange = () => {\r\n                if (installingWorker.state === 'installed') {\r\n                    if (navigator.serviceWorker.controller) {\r\n                        // At this point, the old content will have been purged and\r\n                        // the fresh content will have been added to the cache.\r\n                        // It's the perfect time to display a \"New content is\r\n                        // available; please refresh.\" message in your web app.\r\n                        console.log('[SW] New content is available; please refresh.');\r\n\r\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\r\n                    } else {\r\n                        // At this point, everything has been precached.\r\n                        // It's the perfect time to display a\r\n                        // \"Content is cached for offline use.\" message.\r\n                        console.log('[SW] Content is cached for offline use.');\r\n                    }\r\n                }\r\n            };\r\n        };\r\n\r\n        await subscribeNotifications(registration);\r\n    } catch (error) {\r\n        console.error('[SW] Error during service worker registration: ', error);\r\n    }\r\n}\r\n\r\nasync function subscribeNotifications(registration) {\r\n    try {\r\n        let pushSubscription = await registration.pushManager.getSubscription();\r\n        if (pushSubscription) await pushSubscription.unsubscribe();\r\n\r\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\r\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\r\n\r\n        const { endpoint } = pushSubscription;\r\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\r\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\r\n\r\n        if (endpoint && p256dh_base64url && auth_base64url) {\r\n            const { authorizationState } = ApplicationStore;\r\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\r\n                await TdLibController.send({\r\n                    '@type': 'registerDevice',\r\n                    device_token: {\r\n                        '@type': 'deviceTokenWebPush',\r\n                        endpoint: endpoint,\r\n                        p256dh_base64url: p256dh_base64url,\r\n                        auth_base64url: auth_base64url\r\n                    },\r\n                    other_user_ids: []\r\n                });\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('[SW] Error during service worker push subscription: ', error);\r\n    }\r\n}\r\n\r\nasync function checkValidServiceWorker(swUrl) {\r\n    console.log('[SW] CheckValidServiceWorker');\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    try {\r\n        const response = await fetch(swUrl);\r\n\r\n        // Ensure service worker exists, and that we really are getting a JS file.\r\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\r\n            // No service worker found. Probably a different app. Reload the page.\r\n            const registration = await navigator.serviceWorker.ready;\r\n            await registration.unregister();\r\n\r\n            window.location.reload();\r\n        } else {\r\n            // Service worker found. Proceed as normal.\r\n            await registerValidSW(swUrl);\r\n        }\r\n    } catch (error) {\r\n        console.log('[SW] No internet connection found. App is running in offline mode.');\r\n    }\r\n}\r\n\r\nexport async function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        let registration = await navigator.serviceWorker.ready;\r\n\r\n        await registration.unregister();\r\n    }\r\n}\r\n\r\nexport async function update() {\r\n    if ('serviceWorker' in navigator) {\r\n        let registration = await navigator.serviceWorker.ready;\r\n\r\n        await registration.update();\r\n    }\r\n}\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport OptionStore from '../Stores/OptionStore';\r\nimport TdLibController from '../Controllers/TdLibController';\r\n\r\nclass UserStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.items = new Map();\r\n        this.fullInfoItems = new Map();\r\n\r\n        this.addTdLibListener();\r\n        this.setMaxListeners(Infinity);\r\n    }\r\n\r\n    onUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'updateUser': {\r\n                this.set(update.user);\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            case 'updateUserFullInfo':\r\n                this.setFullInfo(update.user_id, update.user_full_info);\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            case 'updateUserStatus': {\r\n                let user = this.get(update.user_id);\r\n                if (user) {\r\n                    this.assign(user, { status: update.status });\r\n                }\r\n\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    onClientUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'clientUpdateOpenUser': {\r\n                this.emit(update['@type'], update);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    addTdLibListener = () => {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    removeTdLibListener = () => {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    assign(source1, source2) {\r\n        Object.assign(source1, source2);\r\n        //this.set(Object.assign({}, source1, source2));\r\n    }\r\n\r\n    getMyId() {\r\n        const myId = OptionStore.get('my_id');\r\n        if (!myId) return null;\r\n        if (!myId.value) return null;\r\n\r\n        return myId.value;\r\n    }\r\n\r\n    get(userId) {\r\n        return this.items.get(userId);\r\n    }\r\n\r\n    set(user) {\r\n        this.items.set(user.id, user);\r\n    }\r\n\r\n    getFullInfo(id) {\r\n        return this.fullInfoItems.get(id);\r\n    }\r\n\r\n    setFullInfo(id, fullInfo) {\r\n        this.fullInfoItems.set(id, fullInfo);\r\n    }\r\n}\r\n\r\nconst store = new UserStore();\r\nwindow.user = store;\r\nexport default store;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\n\r\nexport function withSaveRef() {\r\n    return Component => {\r\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\r\n    };\r\n}\r\n\r\nexport function withRestoreRef() {\r\n    return Component => {\r\n        return class extends React.Component {\r\n            render() {\r\n                const { forwardedRef, ...rest } = this.props;\r\n\r\n                return <Component {...rest} ref={forwardedRef} />;\r\n            }\r\n        };\r\n    };\r\n}\r\n\r\nexport function getDisplayName(WrappedComponent) {\r\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n}\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport Cookies from 'universal-cookie';\r\nimport i18n from 'i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\nimport LocalStorageBackend from 'i18next-localstorage-backend';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport TdLibController from '../Controllers/TdLibController';\r\n\r\nconst defaultLanguage = 'en';\r\nconst defaultNamespace = 'translation';\r\nconst cookies = new Cookies();\r\nconst language = cookies.get('i18next') || defaultLanguage;\r\n\r\n// const detection = {\r\n//     // order and from where user language should be detected\r\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\r\n//\r\n//     // keys or params to lookup language from\r\n//     lookupQuerystring: 'lng',\r\n//     lookupCookie: 'i18next',\r\n//     lookupLocalStorage: 'i18nextLng',\r\n//     lookupFromPathIndex: 0,\r\n//     lookupFromSubdomainIndex: 0,\r\n//\r\n//     // cache user language on\r\n//     caches: ['localStorage', 'cookie']\r\n// };\r\n\r\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\r\n    .init({\r\n        //detection: detection,\r\n        ns: [defaultNamespace, 'local'],\r\n        defaultNS: defaultNamespace,\r\n        fallbackNS: ['local', 'emoji'],\r\n        resources: {\r\n            en: {\r\n                local: {\r\n                    DeletedMessage: 'Deleted message',\r\n                    YourPhone: 'Your Phone',\r\n                    StartText: 'Please confirm your country code and enter your phone number.',\r\n                    Next: 'Next',\r\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\r\n                    More: 'More',\r\n                    SendMessage: 'Send Message',\r\n                    ChatInfo: 'Chat Info',\r\n                    ChannelInfo: 'Channel Info',\r\n                    Stickers: 'STICKERS',\r\n                    Emoji: 'EMOJI'\r\n                },\r\n                emoji: {\r\n                    Search: 'Search',\r\n                    NotEmojiFound: 'No Emoji Found',\r\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\r\n                    SearchResults: 'Search Results',\r\n                    Recent: 'Frequently Used',\r\n                    SmileysPeople: 'Smileys & People',\r\n                    AnimalsNature: 'Animals & Nature',\r\n                    FoodDrink: 'Food & Drink',\r\n                    Activity: 'Activity',\r\n                    TravelPlaces: 'Travel & Places',\r\n                    Objects: 'Objects',\r\n                    Symbols: 'Symbols',\r\n                    Flags: 'Flags',\r\n                    Custom: 'Custom'\r\n                },\r\n                translation: {\r\n                    AppName: 'Telegram',\r\n                    Loading: 'Loading',\r\n                    Connecting: 'Connecting',\r\n                    Updating: 'Updating'\r\n                }\r\n            },\r\n            ru: {\r\n                local: {\r\n                    DeletedMessage: ' ',\r\n                    YourPhone: ' ',\r\n                    StartText: ',       .',\r\n                    Next: '',\r\n                    InvalidPhoneNumber:\r\n                        '  . ,      .',\r\n                    More: '',\r\n                    SendMessage: ' ',\r\n                    ChatInfo: '  ',\r\n                    ChannelInfo: '  ',\r\n                    Stickers: '',\r\n                    Emoji: ''\r\n                },\r\n                emoji: {\r\n                    Search: '',\r\n                    NotEmojiFound: '  ',\r\n                    ChooseDefaultSkinTone: '    ',\r\n                    SearchResults: ' ',\r\n                    Recent: ' ',\r\n                    SmileysPeople: '  ',\r\n                    AnimalsNature: '  ',\r\n                    FoodDrink: '  ',\r\n                    Activity: '',\r\n                    TravelPlaces: '  ',\r\n                    Objects: '',\r\n                    Symbols: '',\r\n                    Flags: '',\r\n                    Custom: ''\r\n                },\r\n                translation: {\r\n                    AppName: '',\r\n                    Loading: '',\r\n                    Connecting: '',\r\n                    Updating: ''\r\n                }\r\n            }\r\n        },\r\n        lng: language,\r\n        fallbackLng: defaultLanguage,\r\n        interpolation: {\r\n            escapeValue: false\r\n        },\r\n        react: {\r\n            wait: false\r\n        }\r\n    });\r\n\r\nconst cache = new LocalStorageBackend(null, {\r\n    enabled: true,\r\n    prefix: 'i18next_res_',\r\n    expirationTime: Infinity\r\n});\r\n\r\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\r\n    return data;\r\n});\r\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\r\n    return data;\r\n});\r\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\r\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\r\n\r\nclass LocalizationStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.i18n = i18n;\r\n        this.cache = cache;\r\n\r\n        this.setMaxListeners(Infinity);\r\n        this.addTdLibListener();\r\n    }\r\n\r\n    addTdLibListener = () => {\r\n        TdLibController.addListener('update', this.onUpdate);\r\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    removeTdLibListener = () => {\r\n        TdLibController.removeListener('update', this.onUpdate);\r\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\r\n    };\r\n\r\n    onUpdate = update => {\r\n        switch (update['@type']) {\r\n            case 'updateAuthorizationState': {\r\n                switch (update.authorization_state['@type']) {\r\n                    case 'authorizationStateWaitTdlibParameters':\r\n                        TdLibController.send({\r\n                            '@type': 'setOption',\r\n                            name: 'localization_target',\r\n                            value: { '@type': 'optionValueString', value: 'android' }\r\n                        });\r\n                        TdLibController.send({\r\n                            '@type': 'setOption',\r\n                            name: 'language_pack_id',\r\n                            value: { '@type': 'optionValueString', value: language }\r\n                        });\r\n                        TdLibController.send({\r\n                            '@type': 'getLocalizationTargetInfo',\r\n                            only_local: false\r\n                        }).then(result => {\r\n                            this.info = result;\r\n\r\n                            TdLibController.clientUpdate({\r\n                                '@type': 'clientUpdateLanguageChange',\r\n                                language: language\r\n                            });\r\n                        });\r\n                        break;\r\n                }\r\n                break;\r\n            }\r\n            case 'updateLanguagePackStrings': {\r\n                // add/remove new strings\r\n\r\n                this.emit('updateLanguagePackStrings', update);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    onClientUpdate = async update => {\r\n        switch (update['@type']) {\r\n            case 'clientUpdateLanguageChange': {\r\n                const { language } = update;\r\n\r\n                TdLibController.send({\r\n                    '@type': 'getLanguagePackStrings',\r\n                    language_pack_id: language,\r\n                    keys: []\r\n                }).then(async result => {\r\n                    const cookies = new Cookies();\r\n                    cookies.set('i18next', language);\r\n\r\n                    const resources = this.processStrings(language, result);\r\n\r\n                    this.cache.save(language, defaultNamespace, resources);\r\n\r\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\r\n\r\n                    await i18n.changeLanguage(language);\r\n\r\n                    TdLibController.send({\r\n                        '@type': 'setOption',\r\n                        name: 'language_pack_id',\r\n                        value: { '@type': 'optionValueString', value: language }\r\n                    });\r\n\r\n                    this.emit('clientUpdateLanguageChange', update);\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    processStrings = (lng, languagePackStrings) => {\r\n        if (!languagePackStrings) return {};\r\n        const { strings } = languagePackStrings;\r\n        if (!strings) return {};\r\n\r\n        let result = {};\r\n        for (let i = 0; i < strings.length; i++) {\r\n            const { value } = strings[i];\r\n            switch (value['@type']) {\r\n                case 'languagePackStringValueOrdinary': {\r\n                    result[strings[i].key] = value.value;\r\n                    break;\r\n                }\r\n                case 'languagePackStringValuePluralized': {\r\n                    //result[strings[i].key] = value.value;\r\n                    break;\r\n                }\r\n                case 'languagePackStringValueDeleted': {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    loadLanguage = async language => {\r\n        const result = await TdLibController.send({\r\n            '@type': 'getLanguagePackStrings',\r\n            language_pack_id: language,\r\n            keys: []\r\n        });\r\n\r\n        const resources = this.processStrings(language, result);\r\n\r\n        this.cache.save(language, defaultNamespace, resources);\r\n\r\n        i18n.addResourceBundle(language, defaultNamespace, resources);\r\n    };\r\n}\r\n\r\nconst store = new LocalizationStore();\r\nwindow.localization = store;\r\nexport default store;\r\n","/*\r\n *  Copyright (c) 2018-present, Evgeny Nadymov\r\n *\r\n * This source code is licensed under the GPL v.3.0 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport React from 'react';\r\nimport packageJson from '../../package.json';\r\nimport './Footer.css';\r\n\r\nclass Footer extends React.PureComponent {\r\n    render() {\r\n        return (\r\n            <div className='footer-wrapper'>\r\n                <span>{packageJson.version}</span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Footer;\r\n"],"sourceRoot":""}